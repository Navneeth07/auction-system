;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="737985bb-0d11-c241-6fe6-ca88e47ff6f4")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6178534,e=>{"use strict";var t=e.i(4205214),r=e.i(6264863),i=e.i(8660982),a=e.i(1991452),s=e.i(2504781),n=e.i(4030453),o=e.i(3500331),l=e.i(3671642),c=e.i(5255926),u=e.i(9318197),d=e.i(3169345),m=e.i(455575),p=e.i(57106),h=e.i(8042625),f=e.i(9070994),g=e.i(4244280),y=e.i(5338940),x=e.i(1717203),b=e.i(7557283),j=e.i(545405),v=e.i(6060673),w=e.i(185801);async function _(e,t,r,i){await (0,f.default)(`${g.API_PROJECTS}/${e.id}/deploy-hooks${(0,h.encode)({teamId:t})}`,{method:"POST",body:{ref:i,name:r},throwOnHTTPError:!0})}let S=e=>{let{branch:r,id:a,name:n,url:o,mutate:l,project:c,onError:u}=e,{team:p}=(0,y.useTeam)(),[x,b]=(0,i.useState)(!1),v=(0,m.useToasts)(),w=(0,i.useCallback)(async e=>{"preventDefault"in e&&e?.preventDefault(),b(!0);try{await (0,f.default)(`${g.API_PROJECTS}/${c.id}/deploy-hooks/${a}${(0,h.encode)({teamId:p?p.id:null})}`,{method:"DELETE",throwOnHTTPError:!0}),await l()}catch(e){u(e)}finally{b(!1)}},[l,p,c,a,u]);return(0,t.jsxs)(d.Table.Row,{children:[(0,t.jsx)(d.Table.Cell,{style:{verticalAlign:"middle"},children:n||"-"}),(0,t.jsx)(d.Table.Cell,{style:{verticalAlign:"middle"},children:r}),(0,t.jsx)(d.Table.Cell,{className:"geist-ellipsis",title:o,style:{verticalAlign:"middle",height:"52px",alignContent:"center"},children:(0,t.jsx)("code",{className:"geist-mono",style:{maxWidth:"300px",display:"block",overflow:"hidden",textOverflow:"ellipsis"},children:o})}),(0,t.jsx)(d.Table.Cell,{style:{verticalAlign:"middle"},children:(0,t.jsxs)("div",{className:"flex flex-initial flex-row items-stretch justify-start gap-2",children:[(0,t.jsx)(s.Button,{onClick:e=>{"preventDefault"in e&&e?.preventDefault(),(0,j.copyToClipboard)(o),v.message("Copied to clipboard!")},size:"small",children:"Copy"}),(0,t.jsx)(s.Button,{loading:x,onClick:w,size:"small",type:"error",children:"Revoke"})]})})]},a)};e.s(["createDeployHook",0,_,"default",0,()=>{let e=(0,a.useRouter)(),{data:m,mutate:h}=(0,v.useProject)(e.query.project),{team:f,isReady:g}=(0,y.useTeam)(),{can:j,isLoading:T}=(0,x.default)(),P=j(b.Action.Update,b.Resource.Project),[C,E]=(0,i.useState)(!1),[N,R]=(0,i.useState)(""),[k,I]=(0,i.useState)(""),[A,O]=(0,i.useState)(null),D=!g||!m||T,L=(0,i.useCallback)(async e=>{if(e.preventDefault(),O(null),""===k.replace(/\s/g,""))return O({message:"Hook name must not be empty"});if(""===N)return O({message:"Branch name must not be empty"});if(k.length>180)return O({message:"The name for your Deploy Hook cannot be longer than 180 characters."});E(!0);try{await _(m,f?.id,k,N),await h(),R(""),I("")}catch(e){O(e)}finally{E(!1)}},[N,k,m,f,h]),$=m?.link,G=$?$.deployHooks:null,M=(0,i.useMemo)(()=>m?$?Array.isArray(G)&&G.length?(0,t.jsxs)(d.Table,{children:[(0,t.jsxs)(d.Table.Colgroup,{children:[(0,t.jsx)(d.Table.Col,{className:"w-1/4"}),(0,t.jsx)(d.Table.Col,{className:"w-[15%]"}),(0,t.jsx)(d.Table.Col,{className:"w-[45%]"}),(0,t.jsx)(d.Table.Col,{className:"w-[15%]"})]}),(0,t.jsx)(d.Table.Header,{children:(0,t.jsxs)(d.Table.Row,{children:[(0,t.jsx)(d.Table.Head,{children:"Name"}),(0,t.jsx)(d.Table.Head,{children:"Branch"}),(0,t.jsx)(d.Table.Head,{children:"URL"}),(0,t.jsx)(d.Table.Head,{})]})}),(0,t.jsx)(d.Table.Body,{children:G.map(e=>(0,t.jsx)(S,{branch:e.ref,id:e.id,mutate:h,name:e.name,onError:O,project:m,url:e.url},e.id))})]}):(0,t.jsx)("p",{className:"text-copy-14",children:"This project does not have any deploy hooks."}):(0,t.jsxs)("p",{className:"text-copy-14",children:["This Project is not connected to a Git repository. To be able to set up a Deploy Hook, you need to set up a new connection in the ",'"Connected Git Repository" section above.']}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Skeleton,{height:17,style:{marginTop:"5px"},width:280}),(0,t.jsx)(c.Skeleton,{height:17,style:{marginTop:"5px"},width:170}),(0,t.jsx)(c.Skeleton,{className:"geist-show-on-mobile",height:17,style:{marginTop:"5px"},width:200}),(0,t.jsx)(c.Skeleton,{className:"geist-show-on-mobile",height:17,style:{marginTop:"5px"},width:45})]}),[m,$,G,h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(w.ProjectSettingsFieldset,{description:"Deploy hooks are unique URLs that allow you to trigger a deployment of a given branch.",disabled:D||!P,highlightNote:!D&&!P,note:D?(0,t.jsx)(c.Skeleton,{boxHeight:32,vcenter:!0,width:200}):P?(0,t.jsxs)("p",{className:"jsx-c668af8586dc9ab2 text-copy-14 text-gray-900 leading-[32px]",children:["Learn more about"," ",(0,t.jsx)(p.Link,{external:!0,href:"/docs/deploy-hooks",tab:!0,type:"highlight",children:"Deploy Hooks"})]}):(0,t.jsx)("p",{className:"jsx-c668af8586dc9ab2 text-copy-14 text-gray-900 leading-[32px]",children:"You need additional permissions to manage your project's deploy hooks."}),title:"Deploy Hooks",children:[M,m&&$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Spacer,{y:.5}),(0,t.jsx)(u.Spacer,{y:.5}),(0,t.jsx)("form",{onSubmit:L,className:"jsx-c668af8586dc9ab2",children:(0,t.jsxs)("div",{className:"jsx-c668af8586dc9ab2 flex flex-initial flex-col justify-start @lg-page:flex-row items-start @lg-page:items-end gap-4",children:[(0,t.jsxs)("div",{className:"jsx-c668af8586dc9ab2 flex flex-initial items-stretch justify-start flex-col w-full @lg-page:w-auto",children:[(0,t.jsx)(l.Label,{htmlFor:"hook-name",value:"Name"}),(0,t.jsx)(o.Input,{explicitId:"hook-name",id:"hook-name",onChange:e=>I(e.target.value),placeholder:"My Example Hook",value:k,width:"100%"})]}),(0,t.jsxs)("div",{className:"jsx-c668af8586dc9ab2 flex flex-initial flex-col items-stretch justify-start w-full @lg-page:w-auto",children:[(0,t.jsx)(l.Label,{htmlFor:"hook-branch",value:"Branch"}),(0,t.jsx)(o.Input,{explicitId:"hook-branch",id:"hook-branch",onChange:e=>R(e.target.value),placeholder:"main",value:N,width:"100%"})]}),(0,t.jsx)(s.Button,{loading:C,style:{alignSelf:"end"},children:"Create Hook"})]})})]}):null,A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Spacer,{}),(0,t.jsx)(n.Error,{children:A.message})]}):null]}),(0,t.jsx)(r.default,{id:"c668af8586dc9ab2",children:".input.jsx-c668af8586dc9ab2 label.jsx-c668af8586dc9ab2{color:var(--geist-foreground);cursor:pointer;align-items:center;font-size:13px;display:inline-flex}.input.disabled.jsx-c668af8586dc9ab2{opacity:.4}.input.jsx-c668af8586dc9ab2 label.jsx-c668af8586dc9ab2 .copy.jsx-c668af8586dc9ab2{margin-left:8px}.create-hook.jsx-c668af8586dc9ab2{justify-content:space-between;align-items:center;width:100%;display:flex}"})]})}])},3207250,e=>{"use strict";var t=e.i(7010772),r=e.i(8042625),i=e.i(277234),a=e.i(4244280),s=e.i(9668517),n=e.i(5140444);async function o(e){return(0,i.fetchAPI)(e,{throwOnHTTPError:!0})}e.s(["default",0,function(e){let{user:i}=(0,n.useUser)(),l=(0,s.useTeamSlug)();return(0,t.default)(()=>i&&!i.limited&&e?`${a.API_INTEGRATION_CONTROLLER}/detect-framework${(0,r.encode)({url:e,teamId:l})}`:null,o)}])},6532114,e=>{"use strict";e.s(["getRepoTree",0,function(e){return"github"===e?"tree":"gitlab"===e?"-/tree":"src"}])},1719521,e=>{"use strict";var t=e.i(850302),r=e.i(8042625),i=e.i(277234),a=e.i(4244280),s=e.i(5338940);e.s(["default",0,function(e,n,o){let{isReady:l,team:c}=(0,s.useTeam)(o);return(0,t.default)(()=>e&&l?`${(0,a.API_PROJECTS_VERSION)("v4")}/${encodeURIComponent(e)}/integrations${(0,r.encode)({teamId:c?.id})}`:"",e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),n)}])},2661670,e=>{"use strict";var t=e.i(850302),r=e.i(277234),i=e.i(4244280),a=e.i(5338940);async function s(e){let{teamId:t,gitNamespaceId:a,gitProvider:s,gitProviderCustomHost:n,gitNamespaceOwnerType:o}=e;return(0,r.fetchAPI)(`${i.API_TEAMS}/${t}/git-exclusivity`,{method:"POST",body:{gitNamespaceId:a,gitProvider:s,gitProviderCustomHost:n,gitNamespaceOwnerType:o},throwOnHTTPError:!0})}async function n(e){let{teamId:t,gitNamespaceId:a,gitProvider:s}=e;return(0,r.fetchAPI)(`${i.API_TEAMS}/${t}/git-exclusivity`,{method:"DELETE",body:{gitNamespaceId:a,gitProvider:s},throwOnHTTPError:!0})}e.s(["postGitExclusivity",0,s,"removeGitExclusivity",0,n,"useListGitExclusivity",0,function(e,a){let{teamId:s}=e;return(0,t.default)(()=>s?`${i.API_TEAMS}/${s}/git-exclusivity`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),a)},"useVerifyGitExclusivity",0,function(e){let{gitProvider:s,gitNamespaceId:n,gitNamespaceSlug:o}=e,{team:l,allTeamsSlugToFlagsMap:c}=(0,a.useTeam)(),u=!!l&&c?.[l.slug]?.["git-exclusivity"],d=(e=>{let{gitProvider:t,gitNamespaceId:r,gitNamespaceSlug:i}=e,a="bitbucket"===t?r:i;if("string"==typeof a){let e=a.indexOf("/");return e>0?a.slice(0,e):a}return a})({gitProvider:s,gitNamespaceId:n,gitNamespaceSlug:o});return(0,t.default)(()=>l&&s&&d?`${i.API_TEAMS}/${l.id}/git-exclusivity/${s}/${d}`:null,async e=>"github-limited"!==s&&u&&l?(0,r.fetchAPI)(e,{throwOnHTTPError:!1}):{hasAccess:!0})}])},7562527,e=>{"use strict";var t=e.i(7966665),r=e.i(5677444),i=e.i(8660982);let a="vercel-tutor";e.s(["VERCEL_TUTOR_TEMPLATE_NAME",0,a,"useRepoQuery",0,function(){let e=(0,r.useSearchParams)();return(0,i.useMemo)(()=>{let r=e?.get("repository-url")??e?.get("s"),i=e?.get("customGitHost")??void 0;if("string"==typeof r){let s=(0,t.default)(r,i);if(s)return{host:i,url:r,type:e?.get("provider")??("ghes"===s.type?"github-custom-host":s.type),owner:s.owner,name:s.name,fullName:`${s.owner}/${s.name}`,branch:s.branch,subdir:s.subdir,template:"github"===s.type&&"vercel"===s.owner&&"vercel"===s.name&&s.subdir.startsWith("examples/")?s.subdir.slice(9):"github"===s.type&&"vercel"===s.owner&&"examples"===s.name&&"vercel-tutor"===s.subdir?a:"github"===s.type&&"vercel"===s.owner&&"examples"===s.name&&s.subdir.startsWith("apps/")?s.subdir.slice(5):void 0}}return null},[e])}])},1508268,e=>{"use strict";var t=e.i(850302),r=e.i(277234),i=e.i(4244280),a=e.i(5338940);e.s(["useProjectsByRepoUrl",0,function(e){let{team:s,isReady:n}=(0,a.useTeam)(),o=new URL((0,i.API_PROJECTS_VERSION)("v2"),"https://vercel.com");return o.searchParams.set("repoUrl",e??""),s?.id&&o.searchParams.set("teamId",s.id),(0,t.default)(n&&e?`${o.pathname}${o.search}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}))}])},8285341,e=>{e.v({card:"card-module__IZl3UW__card",compressCardOnMobile:"card-module__IZl3UW__compressCardOnMobile",newCard:"card-module__IZl3UW__newCard",root:"card-module__IZl3UW__root",uncontained:"card-module__IZl3UW__uncontained"})},6038905,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),i=e.i(9722978),a=e.i(746850),s=e.i(8285341);let n=r.createContext({});n.displayName="CardContext";let o=r.forwardRef(function(e,o){let{title:l,titleDisabled:c,titleSuffix:u,subtitle:d,children:m,active:p=!0,className:h,uncontained:f,compressCardOnMobile:g,...y}=e,x=r.useRef(null);return(0,t.jsx)(n.Provider,{value:{active:p},children:(0,t.jsxs)("div",{className:(0,i.clsx)(s.default.root,s.default.newCard,"@md-page:rounded-lg",{"bg-background-100 @md-page:shadow-lg":p,"@md-page:shadow-border":!p},h),...y,children:[(0,t.jsxs)("div",{className:(0,i.clsx)(s.default.card,{[s.default.compressCardOnMobile]:g,[s.default.uncontained]:f}),ref:(0,a.default)([x,o]),title:p?void 0:c,children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3 flex-initial",children:[(0,t.jsx)("h3",{className:"text-heading-24",style:{...!p&&{color:"var(--ds-gray-700)"}},children:l}),u||null]}),(0,t.jsx)("div",{style:{marginTop:"var(--geist-space-4x)"}}),d?(0,t.jsx)("div",{className:"text-copy-14 font-normal m-0",style:{color:p?"var(--ds-gray-1000)":"var(--ds-gray-700)",margin:"var(--geist-gap) 0"},children:d}):null,f?null:m]}),f?m:null]})})});e.s(["default",0,o,"useCardContext",0,()=>r.useContext(n)])},4298944,e=>{"use strict";var t=e.i(6232213),r=e.i(8660982),i=e.i(1991452),a=e.i(5140444);e.s(["useTrackStatsigEvent",0,function(e){let{eventName:s,metadata:n}=e,{user:o,isLoading:l}=(0,a.useUser)(),{isReady:c}=(0,i.useRouter)(),u=(0,r.useRef)({});(0,r.useEffect)(()=>{l||!o||!c||u.current[s]||(u.current[s]=!0,(0,t.postToStatsigClient)({events:[{eventName:s,...n?{metadata:n}:{}}]}))},[s,n,c,l,o])}])},5466001,e=>{"use strict";var t=e.i(7045101),r=e.i(1508268);e.s(["useRemainingEligibleProjects",0,function(e){let{data:i,isLoading:a,isValidating:s}=(0,t.useDetectEligibleProjects)(e),{data:n,isLoading:o,isValidating:l,mutate:c}=(0,r.useProjectsByRepoUrl)(e),u=(i?.projects.length??0)>1,d=i?.projects.filter(e=>!n?.some(t=>!!t.rootDirectory&&e.path?.includes(t.rootDirectory)));return{isLoading:a||o,isValidating:s||l,data:u?d:[],mutate:c}}])},377478,e=>{"use strict";var t=e.i(8660982),r=e.i(850302),i=e.i(1991452),a=e.i(5677444),s=e.i(8042625);let n=null;e.s(["default",0,function(){let{data:e,mutate:o}=(0,r.default)("import-url-data",()=>n),l=(0,i.useRouter)(),c=(0,a.usePathname)(),{query:u}=l;(0,t.useEffect)(()=>{n={...u},o()},[o,c,u]);let d=(0,t.useCallback)(e=>{let t=n||u,r=!1;for(let i in e)if(e[i]!==t[i]){r=!0;break}if(!r)return;let i=Object.assign({},t,e);for(let e in i)null===i[e]&&delete i[e];let a=l.pathname+(0,s.encode)(i);l.replace({pathname:l.pathname,query:i},a,{shallow:!0}),n=i,o()},[o,u,l]);return[e||u,d]}])},1177040,e=>{"use strict";var t=e.i(8660982);let r={configureProject:!1,deploymentId:null,rootDirectory:"",deploying:null,deploymentReset:null,configureProjectLoading:!1,dispatch:()=>void 0,flowId:null},i=t.createContext(r);function a(e,t){switch(t.type){case"SET_CONFIGURE_PROJECT":return{...e,configureProject:!!t.configureProject};case"SET_DEPLOYING":return{...e,deploying:!!t.deploying};case"SET_DEPLOYMENT_RESET":return{...e,deploymentReset:!!t.deploymentReset};case"SET_DEPLOYMENT_ID":return{...e,deploymentId:t.deploymentId};case"SET_ROOT_DIRECTORY":return{...e,rootDirectory:t.rootDirectory};case"RESET":return{...r,dispatch:e.dispatch};case"SET_FLOW_ID_ONCE":return{...e,flowId:e.flowId||t.flowId};default:return e}}i.displayName="ProjectImportContext",e.s(["ProjectImportContext",0,i,"useProjectImportContext",0,()=>t.useContext(i),"useProjectImportReducer",0,function(){return t.useReducer(a,r)}])},5065835,4588064,e=>{"use strict";var t=e.i(5140444),r=e.i(4586231),i=e.i(850302),a=e.i(7691268);function s(e,r,s){let{user:n}=(0,t.useUser)();return(0,i.default)(n&&!n.limited?e:null,e=>"object"==typeof e&&null!==e?(0,a.getRepo)(e):(0,a.getRepo)(e,r,s),{shouldRetryOnError:e=>404!==e.status})}e.s(["default",0,s],4588064),e.s(["useRepoIfGitVerified",0,function(e,i,a){let{user:n}=(0,t.useUser)(),{account:o}=(0,r.default)({account:n&&!n.limited?n:void 0});return s(...o?.github?.verified||o?.gitlab?.verified||o?.bitbucket?.verified||o?.["github-limited"]?.verified||o?.["github-custom-host"]?.verified?"object"==typeof e&&null!==e?[e,void 0,void 0]:[e,i,a]:[null,void 0,void 0])}],5065835)},9192668,e=>{"use strict";var t=e.i(4205214),r=e.i(4345845),i=e.i(325293),a=e.i(2064047),s=e.i(9739627),n=e.i(5255926),o=e.i(57106),l=e.i(4004502),c=e.i(5677444),u=e.i(5614970),d=e.i(7562527),m=e.i(5065835),p=e.i(4588064),h=e.i(1177040),f=e.i(4844919),g=e.i(9722978);function y(e){let{showDirectory:r=!0,checkGitVerified:i=!1,className:a}=e,s=(0,d.useRepoQuery)(),{rootDirectory:o}=(0,h.useProjectImportContext)();if(!s)return(0,t.jsxs)("div",{className:(0,g.default)("flex flex-col items-stretch justify-start gap-3 flex-initial",a),children:[(0,t.jsx)(n.Skeleton,{height:21,width:150}),(0,t.jsx)(n.Skeleton,{height:21,width:100}),(0,t.jsx)(n.Skeleton,{height:21,width:135})]});let{data:l}=i?(0,m.useRepoIfGitVerified)({provider:s.type,owner:s.owner,name:s.name,customGitHost:s.host}):(0,p.default)({provider:s.type,owner:s.owner,name:s.name,customGitHost:s.host}),c=function(e){switch(e.type){case"github":case"github-limited":return`https://github.com/${e.fullName}`;case"gitlab":return`https://gitlab.com/${e.fullName}`;case"bitbucket":return`https://bitbucket.org/${e.fullName}`;case"github-custom-host":return`https://${e.host}/${e.fullName}`;default:return`https://${e.type}.com/${e.fullName}`}}(s);return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(j,{href:c,name:s.fullName,type:s.type}),s.branch||l?.defaultBranch||!i&&!l?(0,t.jsx)(b,{href:c,name:s.branch||l?.defaultBranch||"…"}):null,r&&(o||s.subdir)?(0,t.jsx)(x,{href:s.url,name:o||s.subdir||"./"}):null]})}function x(e){let{href:r,name:a}=e;return(0,t.jsxs)(o.Link,{className:"inline-flex items-center gap-2 truncate",href:r,tab:!0,variant:"secondary",children:[(0,t.jsx)(i.FolderOpen,{color:"currentColor",size:16}),(0,t.jsx)("span",{className:"text-copy-14 text-inherit truncate","data-testid":(0,l.tid)("import","sidebar","repo","root-directory"),title:a,children:a})]})}function b(e){let{href:i,name:a}=e;return(0,t.jsxs)(o.Link,{className:"inline-flex items-center min-w-[54px] gap-2 truncate",href:i,tab:!0,variant:"secondary",children:[(0,t.jsx)(r.GitBranch,{color:"currentColor",size:16}),(0,t.jsx)("span",{className:"text-copy-14 text-inherit truncate","data-testid":(0,l.tid)("import","sidebar","repo","branch"),style:{fontFamily:"var(--font-mono)"},title:a,children:a})]})}function j(e){let{href:r,type:i,name:a}=e;return(0,t.jsxs)(o.Link,{className:"inline-flex items-center gap-2 truncate",href:r,tab:!0,children:[(0,t.jsx)(u.default,{gitType:i,height:16,style:{flexShrink:0},width:16}),(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium truncate","data-testid":(0,l.tid)("import","sidebar","repo","name"),title:a,children:a})]})}function v(e){let{placeholder:r,screenshotUrl:i,projectName:a}=e,o=r?(0,t.jsx)(n.Skeleton,{className:"geist-hide-on-mobile",height:120,style:{borderRadius:"4px"},width:192}):null;return i?(0,t.jsx)(s.Image,{alt:a||"screenshot",className:"geist-hide-on-mobile",height:120,loading:"eager",objectFit:"cover",placeholder:"blur",priority:!0,srcDark:i,srcLight:i,style:{display:"block",minWidth:192,minHeight:120,maxHeight:120,borderRadius:"4px"},width:192,unoptimized:!0}):o}e.s(["GitRepository",0,y,"GitRepositoryEntity",0,function(e){let{frameworks:r,action:i,checkGitVerified:s}=e,l=(0,c.useSearchParams)(),u=(0,d.useRepoQuery)(),m=r?.find(e=>e.slug===u?.template),p=l?.get("demo-image"),h=l?.get("demo-title"),g=l?.get("demo-description"),x=l?.get("demo-url"),b=p||m?.screenshot;b=function(e){try{if(!e)return;let t=e;return!function(e){if(!e||e.startsWith("//"))return!1;try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}(t)&&(t.startsWith("//")&&(t=`https:${t}`),t.startsWith("http")||(t=`https://${t}`)),new URL(t).toString()}catch{console.error(`Invalid screenshot URL: ${e}`);return}}(b);let j=h||m?.name,w=g||m?.description,_=x||m?.website,S="cloning"===i&&(!l||!r);return u?(0,t.jsx)(a.Entity,{className:"rounded bg-gray-100",left:(0,t.jsx)(v,{placeholder:S,screenshotUrl:b,projectName:j}),padding:3,children:(0,t.jsxs)("div",{className:`flex w-full flex-col justify-between ${j||S?"h-[120px]":"h-[42px]"} `,children:[j?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(o.Link,{external:!0,href:_,children:(0,t.jsx)("p",{className:"text-[16px] leading-[24px] font-medium geist-ellipsis",children:j})}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900 line-clamp-2",children:w})]}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-1 [contain:inline-size]",children:[(0,t.jsxs)("p",{className:"text-copy-13 text-gray-900",children:[(0,t.jsx)("span",{className:"capitalize",children:i})," from"," ",(e=>{switch(e){case"github":return"GitHub";case"github-limited":return"GitHub (Limited)";case"gitlab":return"GitLab";case"bitbucket":return"Bitbucket";case"github-custom-host":return"GitHub Enterprise";default:return(0,f.default)(e)}})(u.type)]}),(0,t.jsx)(y,{checkGitVerified:s,className:"flex-row"})]})]})}):(0,t.jsx)(n.Skeleton,{height:"cloning"===i?144:66,width:"100%"})}])},7102400,e=>{"use strict";var t=e.i(4205214),r=e.i(1265647),i=e.i(8660982);e.s(["AnimateChangeInHeight",0,function(e){let{children:a,fixToBottom:s,disableAnimation:n,...o}=e,l=(0,i.useRef)(null),[c,u]=(0,i.useState)("auto");return(0,i.useEffect)(()=>{if(l.current){let e=new ResizeObserver(e=>{u(e[0].contentRect.height)});return e.observe(l.current),()=>{e.disconnect()}}},[]),(0,t.jsx)(r.motion.div,{animate:{height:c},style:{height:c,overflowY:"clip",position:"relative",display:s?"flex":"block",flexDirection:"column",justifyContent:"flex-end"},transition:{duration:.3*!n},children:(0,t.jsxs)("div",{ref:l,...o,children:[a,(0,t.jsx)("div",{className:"h-px flex-none"})]})})}])},9263987,e=>{e.v({bounce:"deploying-module__iZpPmG__bounce",buttonsContainer:"deploying-module__iZpPmG__buttonsContainer",chevron:"deploying-module__iZpPmG__chevron",commitMessage:"deploying-module__iZpPmG__commitMessage",commitMessageContainer:"deploying-module__iZpPmG__commitMessageContainer",error:"deploying-module__iZpPmG__error",header:"deploying-module__iZpPmG__header",logs:"deploying-module__iZpPmG__logs",logsError:"deploying-module__iZpPmG__logsError",logsText:"deploying-module__iZpPmG__logsText",logsTimestamp:"deploying-module__iZpPmG__logsTimestamp",panel:"deploying-module__iZpPmG__panel",pop:"deploying-module__iZpPmG__pop",root:"deploying-module__iZpPmG__root",slideDown:"deploying-module__iZpPmG__slideDown",slideUp:"deploying-module__iZpPmG__slideUp",step:"deploying-module__iZpPmG__step",warning:"deploying-module__iZpPmG__warning"})},2148480,e=>{"use strict";var t=e.i(4205214),r=e.i(7950580),i=e.i(3657238),a=e.i(9722978),s=e.i(8248823),n=e.i(1991452),o=e.i(2504781),l=e.i(9318197),c=e.i(455575),u=e.i(57106),d=e.i(8660982),m=e.i(6352514),p=e.i(1853611),h=e.i(8042625),f=e.i(277234),g=e.i(4244280),y=e.i(5338940),x=e.i(5140444),b=e.i(3322724),j=e.i(4787991),v=e.i(6038905),w=e.i(2695633);e.i(5224197);var _=e.i(7442785),S=e.i(855127),T=e.i(6060673),P=e.i(5466001),C=e.i(2574789),E=e.i(9375869),N=e.i(9263987);e.s(["default",0,function(e){let R,{flow:k,deployment:I,mutateDeployment:A,dispatch:O,isVercelTutor:D,vercelTutorPrUrl:L,clonedFrom:$,flowId:G,microfrontendsGroupId:M}=e,U=(0,c.useToasts)(),z=(0,n.useRouter)(),{active:H}=(0,v.useCardContext)(),[F,B]=(0,d.useState)(!1),{expandedSteps:V,setExpandedSteps:q}=(0,S.useExpandedSteps)(I),{team:Z}=(0,y.useTeam)(),{user:W}=(0,x.useUser)(),Y=(0,d.useCallback)(async()=>{B(!0);try{let e=await (0,f.fetchAPI)(`${(0,g.API_DEPLOYMENTS)("v12")}/${I?.id}/cancel${(0,h.encode)({teamId:I?.team?.id})}`,{method:"PATCH",throwOnHTTPError:!0});"CANCELED"===e.readyState&&(U.success("Deployment canceled."),(0,i.mutate)(I?.id??""),"import"===k&&O&&O({type:"SET_DEPLOYING",deploying:!1}))}catch(e){U.error((0,s.errorToString)(e))}finally{B(!1)}},[I,U,O,k]),J=I&&["ERROR","CANCELED","READY"].includes(I.readyState)||!H;I?.meta?.githubDeployment?R=(0,w.getGithubMetaInfo)(I.meta):I?.meta?.gitlabDeployment?R=(0,w.getGitlabMetaInfo)(I.meta):I?.meta?.bitbucketDeployment&&(R=(0,w.getBitbucketMetaInfo)(I.meta));let{data:Q}=(0,T.useProject)(I?.projectId),X=(0,j.useNewProjectLink)(),{mutate:K}=(0,P.useRemainingEligibleProjects)(),ee=(0,C.useLogImportProgressEvent)();(0,d.useEffect)(()=>{z.prefetch(`${X}/success`)},[z,X]);let et=(0,d.useCallback)(()=>{p.analytics.track("new_project_deploy_succeeded",{version:3,flow:k,legacyAction:m.AnalyticsEvent.PROJECT_CREATION_SUCCESS},{send_to:{data_warehouse_legacy:!0,product_analytics:!0}}),p.analytics.track(m.AnalyticsEvent.CREATE_PROJECT,{onboarding:"true"===z.query.onboarding});let e=z.query.remainingProjects,t=z.query.totalProjects;"string"==typeof e&&"string"==typeof t&&ee(Number.parseInt(e)-1,Number.parseInt(t),"import");let i=(0,r.stringify)({"auto-redirect":!0,"developer-id":z.query["developer-id"],"external-id":z.query["external-id"],"redirect-url":z.query["redirect-url"],branch:Q?.link?.productionBranch??"master",deploymentUrl:I?.url??"",projectName:Q?.name??"",s:z.query.s??R?.branchUrl,gitOrgLimit:z.query.gitOrgLimit,hasTrialAvailable:z.query.hasTrialAvailable,totalProjects:z.query.totalProjects,...D?{"vercel-tutor":!0}:{},...L?{"vercel-tutor-pr-url":L}:{},...$?{"cloned-from":$}:{},...G?{"flow-id":G}:{},..."1"===z.query.microfrontends?{microfrontends:"1"}:{},...M?{microfrontendsGroupId:M}:{}});K().then(()=>{z.push(`${X}/success?${i}`)})},[$,k,z,Q?.link?.productionBranch,Q?.name,I?.url,R?.branchUrl,K,ee,X,D,L,G,M]),er=!!R,ei=(0,b.useIsMobile)(),ea=I?.readyState==="ERROR",es=(0,d.useMemo)(()=>{let e=`/${Z?.slug??W?.username??""}`;return`${e}/${Q?.name??""}`},[Q?.name,Z,W?.username]),en=(0,E.useDeploymentLink)(I);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.DeploySteps,{creationFlow:!0,deployment:I,expandedSteps:V,mutateDeployment:A,onComplete:et,onExpandedStepsChange:e=>q(e),teamSlug:Z?.slug,context:"new-project-flow"}),(0,t.jsx)(l.Spacer,{expand:!0}),(0,t.jsxs)("div",{className:(0,a.clsx)("flex flex-col items-stretch gap-4 flex-initial",ei?"flex-col":"flex-row",er&&!ei?"justify-between":"justify-center"),children:[R?(0,t.jsxs)("div",{className:(0,a.clsx)("flex flex-row items-center justify-start gap-2 flex-1",N.default.commitMessageContainer),children:[(0,t.jsx)(u.Link,{external:!0,href:R.commitUrl}),(0,t.jsxs)("span",{className:`text-copy-16 font-normal m-0 ${(0,a.clsx)(N.default.commitMessage)}`,style:{color:H?"var(--accents-5)":"var(--accents-3)"},title:R.commitMessage,children:[R.commitMessage.split("\n")[0]," - ",R.sha.slice(0,6)]})]}):(0,t.jsx)("div",{style:{height:21}}),ea||"import"===k?(0,t.jsxs)("div",{className:(0,a.clsx)("flex flex-col items-stretch justify-end gap-2 flex-initial @md-page:flex-row",N.default.buttonsContainer),children:[ea?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ButtonLink,{href:es,size:"small",type:"secondary",children:"Go to Project"}),(0,t.jsx)(u.ButtonLink,{href:en,size:"small",children:"Inspect Deployment"})]}):null,ea||"import"!==k?null:(0,t.jsx)(o.Button,{disabled:J,loading:F||I?.readyState==="READY",onClick:()=>void Y(),size:"small",type:"secondary",children:I?.readyState==="READY"?"Completing Deployment…":"Cancel Deployment"})]}):null]})]})}])},8492314,e=>{"use strict";var t=e.i(8660982),r=e.i(6625227),i=e.i(100247),a=e.i(7783521),s=e.i(229875);e.s(["useNewDeploymentInterval",0,function(e){let[n,o]=(0,t.useState)(0),l=(0,r.default)(e,{refreshInterval:n},{automaticAliases:!0}),{data:c,mutate:u}=l,d=c?.readyState,m=c?.aliasAssigned||"ERROR"===d||"CANCELED"===d,p=(0,t.useMemo)(()=>(0,s.withThrottle)(e??"",()=>{u()}),[e,u]),{isListening:h}=(0,a.useDeploymentStatusPing)(m?void 0:c,p),{areChecksRunning:f,areDomainsAssigning:g}=(0,i.getDeploymentStatus)(c),y=(!c||m)&&!f&&!g||h,x=!c?.buildingAt;return(0,t.useEffect)(()=>{x?o(1e3):o(3e3*!y)},[y,x]),l}])},4963367,e=>{e.v({deployCard:"deploy-card-module__wIQjha__deployCard"})},9187364,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),i=e.i(1991452),a=e.i(8735244),s=e.i(6232213),n=e.i(7218483),o=e.i(100247),l=e.i(2148480),c=e.i(6038905),u=e.i(8492314),d=e.i(4963367),m=e.i(4422059);e.s(["default",0,function(e){let{deploymentId:p,flow:h,resetDeploying:f,isVercelTutor:g,vercelTutorPrUrl:y,clonedFrom:x,flowId:b,microfrontendsGroupId:j,...v}=e,w=(0,i.useRouter)(),{data:_,mutate:S}=(0,u.useNewDeploymentInterval)(p);(0,r.useEffect)(()=>{if(p){let e=w.query.deploymentId,t=Array.from(new Set(Array.isArray(e)?e.concat([p]):[e??p,p]));w.replace({query:{...w.query,deploymentIds:t}},void 0,{shallow:!0})}},[p]);let{areChecksRunning:T,areDomainsAssigning:P}=(0,o.getDeploymentStatus)(_),C=(0,n.useAgo)(_?.createdAt,{justNowThreshold:0}),E=(0,r.useMemo)(()=>{if(!_)return"Preparing deployment…";switch(_.readyState){case"QUEUED":return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(a.Spinner,{size:16}),"Deployment queued..."]});case"READY":if(T||P)return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(a.Spinner,{size:16}),"Deployment started ",C,"..."]});return"Deployment completed.";case"ERROR":return"Deployment failed with error.";case"CANCELED":return"Deployment canceled.";default:return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(a.Spinner,{size:16}),"Deployment started ",C,"..."]})}},[_,C,T,P]);return!function(e){let{callback:t,deployment:i}=e,a=(0,m.usePrevious)(i?.id),s=(0,m.usePrevious)(i?.readyState);(0,r.useEffect)(()=>{i?.id&&a&&s&&a===i.id&&s!==i.readyState&&("CANCELED"===i.readyState||"ERROR"===i.readyState)&&t(i.readyState)},[i?.readyState,t,i?.id,a,s])}({callback:(0,r.useCallback)(()=>{(0,s.postToStatsigClient)({events:[{eventName:`${h}_deploy_error`}]}),f?.()},[h,f]),deployment:_}),(0,t.jsx)(c.default,{className:d.default.deployCard,subtitle:E,title:"Deployment",...v,children:(0,t.jsx)(l.default,{deployment:_,flow:h,isVercelTutor:g,mutateDeployment:S,vercelTutorPrUrl:y,clonedFrom:x,flowId:b,microfrontendsGroupId:j})})}])},7374478,e=>{"use strict";var t=e.i(4205214),r=e.i(9739627);e.s(["SlashDivider",0,function(){return(0,t.jsx)(r.Image,{alt:"Slash Divider",height:40,srcDark:"https://assets.vercel.com/image/upload/v1689795055/front/new/slash-divider-dark.svg",srcLight:"https://assets.vercel.com/image/upload/v1689795055/front/new/slash-divider-light.svg",width:40})}])},7691989,e=>{"use strict";var t=e.i(8042625),r=e.i(277234),i=e.i(4244280);e.s(["displayError",0,e=>e?.code==="tarball_not_found"?"Your codebase could not be retrieved. Please check that your repository is not empty.":e?.keyword==="additionalProperties"?"Additional property `"+e.params?.additionalProperty+"` is not allowed. Please check the `vercel.json` or `now.json` file in your repository.":e?.message||e?.toString?.(),"getProject",0,e=>{let{id:a,teamId:s}=e;return(0,r.fetchAPI)(`${i.API_PROJECTS}/${a}${(0,t.encode)({teamId:s})}`,{throwOnHTTPError:!0})},"getProjectInfo",0,e=>{let{name:a,teamId:s}=e;return(0,r.fetchAPI)(`${i.API_PROJECTS}/${encodeURIComponent(a||"")}${(0,t.encode)({teamId:s,deploymentInfo:0})}`,{throwOnHTTPError:!0})}])},5394280,e=>{"use strict";var t=e.i(8042625),r=e.i(277234),i=e.i(4244280);async function a(e){let{type:a,source:s,target:n,teamId:o,branch:l}=e;return(0,r.fetchAPI)(`${i.API_INTEGRATION_CONTROLLER}/push-to-repo${(0,t.encode)({teamId:o})}`,{method:"POST",body:JSON.stringify({type:a,source:s,repo:n,branch:l}),throwOnHTTPError:!0,wrapErrorsLegacy:!0})}e.s(["pushRepo",0,a])},6590158,e=>{"use strict";e.s(["shallow",0,function(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}let r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let i of r)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}])},5680277,e=>{"use strict";var t=e.i(7883293),r=e.i(8660982),i=e.i(6590158);let a={loading:!1,gitType:void 0,repoNameStates:{},isPrivate:!0,gitError:null,isTeamRepo:!1},s=(0,t.create)(e=>({...a,setLoading:t=>e(e=>({...e,loading:t})),setGitType:t=>e(e=>({...e,gitType:t})),setRepoNameStates:t=>{e(e=>{let r=t(e.repoNameStates);return{...e,repoNameStates:r}})},setIsPrivate:t=>e(e=>({...e,isPrivate:t})),setGitError:t=>e(e=>({...e,gitError:t})),reset:()=>e(a),setIsTeamRepo:t=>e({isTeamRepo:t})}));e.s(["useGitInputStore",0,s,"useNewNamespace",0,()=>{let e=s((0,r.useCallback)(e=>e.gitType,[]),i.shallow),t=s((0,r.useCallback)(e=>e.repoNameStates,[]),i.shallow)[e||""];return Array.isArray(t)?t[0]:null},"useNewRepo",0,()=>{let e=s((0,r.useCallback)(e=>e.gitType,[]),i.shallow),t=s((0,r.useCallback)(e=>e.repoNameStates,[]),i.shallow)[e||""];return Array.isArray(t)?t[1]:null}])},5432439,e=>{"use strict";var t=e.i(9385057),r=e.i(8660982),i=e.i(6590158),a=e.i(8248823),s=e.i(134877),n=e.i(7691989),o=e.i(5680277);e.s(["useGetProjectName",0,function(){let{setLoading:e,setGitError:l}=(0,o.useGitInputStore)((0,r.useCallback)(e=>({setLoading:e.setLoading,setGitError:e.setGitError}),[]),i.shallow),c=(0,o.useNewRepo)();return async(r,i)=>{if(!c&&!i)return;let o=(0,t.customAlphabet)("123456789abcdefghijklmnopqrstuvwxyz",4),u=c?c.slice(0,95):"",d=i??u;try{await (0,n.getProject)({id:d,teamId:r}),d=`${d}-${o()}`}catch(t){if((0,s.isAPIError)(t)&&"not_found"!==t.code){e(!1),l((0,a.normalizeError)(t));return}}return d}}])},6475061,8334396,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),i=e.i(5677444),a=e.i(5338940),s=e.i(5140444);function n(e){let[t,i]=(0,r.useState)(!1),a=(0,r.useRef)(!1),s=(0,r.useRef)(e),n=(0,r.useCallback)(r=>{i(r),a.current=t,s.current=e},[e,t]);return(0,r.useMemo)(()=>({data:t?s.current:e,frozen:t,setFrozen:n}),[e,t,n])}var o=e.i(5255926);function l(){return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(o.Skeleton,{className:"flex-1",height:"68px"}),(0,t.jsx)(o.Skeleton,{className:"flex-1",height:"68px"})]}),(0,t.jsx)(o.Skeleton,{height:"24px",width:"auto"}),(0,t.jsx)(o.Skeleton,{height:"40px",width:"auto"})]})}var c=e.i(6079422),u=e.i(6489459),d=e.i(455575),m=e.i(1991452),p=e.i(175449);e.i(7197081);var h=e.i(626404),f=e.i(6352514),g=e.i(1853611),y=e.i(6818658),x=e.i(3196486),b=e.i(1628687);let j=e=>{g.analytics.track(f.AnalyticsEvent.NEW_FLOW_CONVERTED,e),(0,x.sendToSnowflake)(y.Topic.VercelAppV0NewFlowConverted,{conversion_type:(0,b.snowflakeify)(e.conversionType),source:e.source,actor_id:e.actorId,team_id:e.teamId,team_created_at:(0,b.floor)(e.teamCreatedAt),prior_plan:(0,b.snowflakeify)(e.priorPlan),new_plan:(0,b.snowflakeify)(e.newPlan),cart_total:(0,b.floor)(e.cartTotal)},"vercel-app")};var v=e.i(9588822),w=e.i(7846892),_=e.i(8378310),S=e.i(2401140),T=e.i(4736806),P=e.i(1450448),C=e.i(5786585);let E=(0,v.withStripe)(function(e){let{user:i,active:a,source:s,teamManager:n,close:o,continueAction:l,isProTrial:c}=e,{team:u,members:d,cartTotal:m,setCartTotal:p,isSubmitting:h,setIsSubmitting:f,scrollToRef:g,paymentMethodInfo:y,showSkeleton:x,onBillingFormReady:b,submit:j,makeDefaultBillingAddress:v,elements:E,billingFormProps:N,addressError:R,setAddressError:k}=(0,P.usePaymentInfoStep)({teamManager:n}),[I,A]=(0,r.useState)(),[O,D]=(0,r.useState)({}),[L,$]=(0,r.useState)(),G=(0,C.usePaymentInfoContinue)({type:"new-flow",team:u,setIsSubmitting:f,submit:j,makeDefaultBillingAddress:v,elements:E,setAddressError:k,cartTotal:m,continueAction:l,paymentMethodInfo:y,taxId:L,teamManager:n,unparsedAddress:O,setSubmissionError:A});return(0,t.jsx)(w.SheetWrapper,{open:a,onClose:o,teamManager:n,children:(0,t.jsx)(S.SheetStepWrapper,{hideFooter:x,title:(0,t.jsx)(_.DefaultTitle,{teamManager:n,isProTrial:c}),defaultCancelText:"Cancel",defaultContinueText:l.text,cancelButton:{text:"Cancel",onClick:o,disabled:h},continueButton:{text:l.text,onClick:()=>void G(),disabled:"loading"===y.type},loading:h,onCancel:o,onContinue:()=>void G(),children:(0,t.jsx)(T.PaymentInfoShared,{user:i,team:u,teamManager:n,setCartTotal:p,members:d,source:s,showSkeleton:x,paymentMethodInfo:y,makeDefaultBillingAddress:v,onBillingFormReady:b,billingFormProps:N,isSubmitting:h,addressError:R,scrollToRef:g,type:"new-flow",setUnparsedAddress:D,setTaxId:$,submissionError:I,continueButtonText:l.text,isProTrial:c})})})});var N=e.i(2504781),R=e.i(8248823),k=e.i(134877),I=e.i(4976875),A=e.i(3238154),O=e.i(8668551);function D(e){let{teamManager:i,planSelector:a,continueAction:s,frozen:n}=e,{validationError:o,setValidationError:l,validate:c,onBlur:u}=(0,I.useTeamNameInput)({teamManager:i}),[d,m]=(0,r.useState)(),[p,h]=(0,r.useState)(!1),f=(0,r.useCallback)(async()=>{m(void 0),h(!0);try{let e=c();if(e)return void l(e);await s.onContinue()}catch(i){let e=(0,R.normalizeError)(i),{link:t,action:r}=(0,k.getErrorLink)(e);m({message:e.message,...t?{link:t}:{},...r?{action:r}:{}})}finally{h(!1)}},[s,c,l]);return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)(A.TeamNameInput,{validationError:o,onBlur:u,teamManager:i,isNewProjectFlow:!0,frozen:n}),(0,t.jsx)(O.SelectorSection,{planSelector:a,errorMessage:d?.message,errorLink:d?.link,errorAction:d?.action,className:"flex flex-col gap-3",frozen:n}),(0,t.jsx)(N.Button,{loading:p||n,onClick:()=>void f(),typeName:"button",children:s.text})]})}function L(e){let{user:r,continueAction:i,teamManager:a,stepState:s,planSelector:n,source:o,frozen:l,isProTrial:c}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D,{continueAction:i,frozen:l,planSelector:n,teamManager:a}),(0,t.jsx)(E,{user:r,active:"payment-info"===s.step,close:()=>{s.gotoStep("select-team-and-plan")},continueAction:i,source:o,teamManager:a,isProTrial:c})]})}var $=e.i(2762499),G=e.i(1347988),M=e.i(1108230);function U(e){let{user:a,teamManager:s,planSelector:n,source:o,onConversionError:l,onConversionSuccess:c,onConversionStart:u,mutate:f,frozen:g,setFrozen:y}=e,x=(0,h.useSteps)({steps:["select-team-and-plan","payment-info"],workflowName:"new-flow-upgrade"}),b=(0,m.useRouter)(),v=(0,i.useSearchParams)(),w=(0,i.usePathname)(),_=(0,r.useRef)(null),S="pro-trial"===n.selectedPlan,T=(0,$.useCreateTeam)({teamManager:s,onConversionStart:u,planSelector:n,mutate:f,onConversionError:l,router:b,customCreateTeamApiSource:"new-flow-upgrade",customPostCreationFlow:e=>{let{team:t,cartTotal:r,selectedPlan:i}=e;_.current=t,j({conversionType:"create",source:o,actorId:a.uid,teamId:t.id,teamCreatedAt:t.createdAt,priorPlan:"hobby",newPlan:i,cartTotal:r});let s=new URLSearchParams(v?.toString());s.set("teamSlug",t.slug),b.replace(`${w}?${s.toString()}`,void 0,{scroll:!1}),d.toasts.success({text:"Your team has been created."})}}),P=(0,G.useUpgradeTeam)({teamManager:s,onConversionStart:u,planSelector:n,mutate:f,onConversionError:l,router:b,source:o,customPostUpgradeFlow:e=>{let{team:t,selectedPlan:r,cartTotal:i}=e;j({conversionType:"upgrade-existing",source:o,actorId:a.uid,teamId:t.id,teamCreatedAt:t.createdAt,priorPlan:"hobby",newPlan:r,cartTotal:i})},awaitMutate:!0}),C="pro"===n.selectedPlan||S,E=(0,r.useMemo)(()=>"pro-trial"===n.selectedPlan?"Start Pro Trial and Deploy":"select-team-and-plan"===x.step&&C?"Continue":"create"===s.userIntent?"Create Team and Deploy":"Upgrade and Deploy",[C,x.step,s.userIntent,n.selectedPlan]),N=(0,r.useCallback)(async e=>{if("select-team-and-plan"===x.step&&C)return void x.gotoStep("payment-info");y(!0),await u();try{"create"===s.userIntent?await T(e):await P(e?{upgradeTimingOption:"now",...e}:{upgradeTimingOption:"now",cartTotal:0}),await c(_.current??void 0),(0,M.trackConversionOnStatsig)({priorPlan:"hobby",newPlan:n.selectedPlan,type:s.userIntent,source:o})}catch(e){throw y(!1),await l().catch(p.noop),e}},[T,C,l,u,c,y,x.gotoStep,x.step,s.userIntent,P,o,n.selectedPlan]),R=(0,r.useMemo)(()=>({onContinue:N,text:E}),[E,N]);return(0,t.jsx)(L,{user:a,continueAction:R,frozen:g,planSelector:n,source:o,stepState:x,teamManager:s,isProTrial:S})}function z(e){let{user:r,team:i,disallowHobby:a,source:s,onConversionError:o,onConversionSuccess:d,onConversionStart:m,mutate:p,frozen:h,setFrozen:f}=e,{data:g,frozen:y,setFrozen:x}=n((0,u.useTeamManagerFromTeam)({team:i})),{data:b,frozen:j,setFrozen:v}=n((0,c.usePlanSelector)({teamManager:g,disallowHobby:a}));return b.loading?(0,t.jsx)(l,{}):(0,t.jsx)(U,{frozen:h||y||j,mutate:p,onConversionError:o,onConversionStart:m,onConversionSuccess:d,planSelector:b.data,setFrozen:e=>{f(e),x(e),v(e)},source:s,teamManager:g,user:r})}let H=()=>Promise.resolve();function F(e){let{selectedTeamSlug:r,disallowHobby:i,source:o,onConversionError:c=H,onConversionSuccess:u=H,onConversionStart:d=H}=e,{user:m,isLoading:p,mutate:h}=(0,s.useUser)(),{team:f,isLoading:g,mutate:y}=(0,a.useTeam)(r),{data:x,frozen:b,setFrozen:j}=n(f),v=async()=>{await Promise.all([h(),y()])};return p||g?(0,t.jsx)(l,{}):!m||x&&x.billing?.plan!=="hobby"?null:(0,t.jsx)(z,{disallowHobby:i,frozen:b,mutate:v,onConversionError:c,onConversionStart:d,onConversionSuccess:u,setFrozen:j,source:o,team:x??void 0,user:m})}let B=e=>{switch(e){case"github":return"GitHub organization";case"gitlab":return"GitLab group";case"bitbucket":return"Bitbucket workspace";default:return"organization"}};e.s(["getGitProviderNameAndOrg",0,B],8334396),e.s(["UpgradeCTA",0,function(e){let{disallowHobby:a,selectedTeamSlug:s,onSubmit:n,setFreezeUpgradeUI:o}=e,l=(0,i.usePathname)(),c=(0,r.useMemo)(()=>l?l.includes("import")?"import":l.includes("clone")?"new-clone":l.replace(/\/|\s/g,"-"):"unknown",[l]),u=(0,r.useMemo)(()=>{if(""!==s)return s??void 0},[s]);return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:(0,t.jsx)(F,{disallowHobby:a,onConversionError:()=>Promise.resolve(o(!1)),onConversionStart:()=>Promise.resolve(o(!0)),onConversionSuccess:n,selectedTeamSlug:u,source:c})})},"useUpgradeCTA",0,e=>{let{isCreatingTeam:i,isTeamRepo:s,isPrivate:n,gitType:o,selectedTeamSlug:l}=e,{teams:c,team:u,isReady:d}=(0,a.useTeam)(l),m=n&&s,p=u?.billing&&"hobby"!==u.billing.plan,h=d&&c?.length===0,f=m&&!p&&!!u?.billing||i||h,[g,y]=(0,r.useState)(!1),x=f||g;return{upgradeMessage:x?(0,t.jsxs)(t.Fragment,{children:["Deploying from a ",n?"private ":"",B(o)," requires a Vercel Pro plan. Switch to an existing Pro team or"," ",i?"create a new one":(0,t.jsxs)(t.Fragment,{children:["upgrade"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:u?.name})]})," ","to continue."]}):null,showUpgradeCTA:x,setFreezeUpgradeUI:y,disallowHobby:m}}],6475061)},6913536,e=>{"use strict";var t=e.i(6532114);e.s(["default",0,function(e,r,i){if(null===e)return"";let a=(0,t.getRepoTree)(e.type);return`${e.url}${i?`${e.subdir?"":`/${a}/${e.branch||r||"main"}`}/${i}`:""}`}])},8276950,e=>{e.v({comboboxLabel:"team-selector-module__POX1Da__comboboxLabel",input:"team-selector-module__POX1Da__input",tooltip:"team-selector-module__POX1Da__tooltip"})},4909757,e=>{"use strict";var t=e.i(4205214),r=e.i(8660982),i=e.i(6881349),a=e.i(5468328),s=e.i(4585051),n=e.i(5255926),o=e.i(5756088),l=e.i(5883567),c=e.i(5338940),u=e.i(8977282),d=e.i(5677444),m=e.i(5140444),p=e.i(6228447),h=e.i(4600551),f=e.i(1717203),g=e.i(7557283),y=e.i(4004502),x=e.i(2661670),b=e.i(8276950);let j="create-team-sentinel";function v(e){let{gitProvider:n,gitNamespaceId:l,gitNamespaceSlug:c,team:u,setShowMissingPermissions:d,disabled:m}=e,y=u.permissions?(0,f.buildCan)(new Map(Object.entries(u.permissions))):()=>!0,{data:j}=(0,x.useVerifyGitExclusivity)({gitProvider:n,gitNamespaceId:l,gitNamespaceSlug:c}),v=y(g.Action.Create,g.Resource.Project),w=(0,p.getTeamLimitedBy)(u),_=1===w.length&&w.includes("mfa"),S=j&&!j.hasAccess||!v||_;(0,r.useEffect)(()=>{S&&d(!0)},[S,d]);let T=(0,r.useMemo)(()=>v?u.limited?_?"You must enable 2FA on your account to create project in this team.":"Re-authentication required.":j&&!j.hasAccess?(0,t.jsxs)(t.Fragment,{children:["This team does not have permission to deploy from"," ",(0,t.jsx)("span",{style:{fontWeight:600},children:c})," as it is a Protected Git Scope."]}):void 0:"You do not have permission to create a project in this team.",[v,j,c,u,_]);return(0,t.jsx)(a.Tooltip,{className:b.default.tooltip,position:"right",style:{display:"inherit"},text:T,children:(0,t.jsx)(i.Combobox.Option,{disabled:S,displayLast:S,label:u.name,prefix:(0,t.jsx)(s.Avatar,{size:16,teamId:u.id}),suffix:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,t.jsx)(h.PlanBadge,{disabled:m,team:u}),T?(0,t.jsx)(a.Tooltip,{text:T,children:(0,t.jsx)(o.LockClosed,{size:16})}):null]}),value:u.slug,children:u.name})})}e.s(["TeamSelector",0,function(e){let{gitProvider:a,gitNamespaceId:s,gitNamespaceSlug:o,disabled:u,onChange:d,value:m,loading:p}=e,h=(0,c.useSortedTeams)(),[f,g]=(0,r.useState)(!1);return(0,t.jsx)(n.Skeleton,{show:p,style:p?{overflow:"hidden"}:void 0,children:(0,t.jsxs)(i.Combobox,{clearable:!1,"data-testid":(0,y.tid)("import-flow","team-selector","combobox-root"),disabled:u,displaySelectedSuffix:!0,noRawSelectedValue:!0,onChange:d,placeholder:"Select a Vercel Team",value:m,children:[(0,t.jsx)(i.Combobox.Input,{className:b.default.input,"data-testid":(0,y.tid)("import-flow","team-selector","combobox-value")}),(0,t.jsx)(i.Combobox.List,{children:(0,t.jsxs)(t.Fragment,{children:[h.map(e=>(0,t.jsx)(v,{disabled:u,gitNamespaceId:s,gitNamespaceSlug:o,gitProvider:a,setShowMissingPermissions:g,team:e},e.slug)),(0,t.jsx)(i.Combobox.Option,{prefix:(0,t.jsx)(l.PlusCircle,{color:"gray-900",size:16}),value:j,children:"Create a Team"}),f?(0,t.jsx)(i.Combobox.Option,{className:b.default.comboboxLabel,disabled:!0,value:"missing-permissions",children:(0,t.jsx)("p",{className:"text-copy-13",children:"Missing Permissions"})}):null]})})]})})},"useSelectedTeamSlug",0,e=>{let{gitProvider:i,gitNamespaceId:a,gitNamespaceSlug:s}=e,{teams:n,team:o,isReady:l}=(0,c.useTeam)(),{user:h}=(0,m.useUser)(),y=(0,d.useRouter)(),b=(0,d.useSearchParams)(),v=(0,d.usePathname)(),[w,_]=(0,r.useState)(null),{can:S}=(0,f.default)(),{data:T}=(0,x.useVerifyGitExclusivity)({gitProvider:i,gitNamespaceId:a,gitNamespaceSlug:s}),P=S(g.Action.Create,g.Resource.Project);(0,r.useEffect)(()=>{if(null===w&&l&&b&&h?.defaultTeamId&&n){let e=(0,u.getScope)(),t=n.find(e=>e.id===h.defaultTeamId)?.slug,r=o?.slug??e??t;_(r??j);let i=b.get("teamSlug");if(i&&i!==r){let e=new URLSearchParams(b.toString());r?e.set("teamSlug",r):e.delete("teamSlug"),y.replace(`${v}?${e.toString()}`,{scroll:!1})}}},[n,w,b,v,y,h,o,l,_]),(0,r.useEffect)(()=>{let e=b?.get("teamSlug");if(w&&e!==w){let e=new URLSearchParams(b?.toString());w===j?e.delete("teamSlug"):(e.set("teamSlug",w),(0,u.setScope)(w)),y.replace(`${v}?${e.toString()}`,{scroll:!1})}},[w]);let C=(0,r.useCallback)(e=>{let t=n?.find(t=>t.slug===e);if(t?.limited){let e=new URLSearchParams(b?.toString());return e.set("teamSlug",t.slug),(0,p.requireAuthentication)({slug:t.slug,next:`${v}?${e.toString()}`,push:e=>{y.push(e)}})}_(e)},[_,n,b,v,y]),E=(0,r.useMemo)(()=>{if(w&&w===o?.slug){if(!P)return(0,t.jsxs)(t.Fragment,{children:["You do not have the required permission to create a project in"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:o.name}),". Select a different Vercel team to continue."]});if(T&&!T.hasAccess)return(0,t.jsxs)(t.Fragment,{children:["This team does not have permission to deploy from"," ",(0,t.jsx)("span",{style:{fontWeight:600},children:s})," as it is a Protected Git Scope. Select a different Vercel team, or change the Git scope to continue."]})}},[P,T,s,w,o?.slug,o?.name]);return{isSelectedTeamSlugReady:"string"==typeof w,isCreatingTeam:w===j,selectedTeamSlug:w,onTeamSlugChange:C,selectedTeamError:E}}])},2138061,e=>{"use strict";let t=/^(?!.*---)[a-z0-9-_.]+$/;function r(e){return t.test(e)&&e.length>0&&e.length<=100}e.s(["PROJECT_NAME_ERROR_MESSAGE",0,"A Project name can only contain up to 100 lowercase letters, digits, and the characters '.', '_', and '-'.","isValidProjectName",0,r,"sanitizeProjectName",0,function e(t){return r(t)?t:e(t.slice(0,100).toLowerCase().replace(/[^a-z0-9-_.]|---/g,"-"))}])},3495961,1315623,6979900,e=>{"use strict";var t=e.i(1991452),r=e.i(5140444);e.s(["useShouldRedirectToNew",0,function(){let e=(0,t.useRouter)(),{data:i,isLoading:a}=(0,r.useUser)();a||i||e.replace("/new")}],3495961);var i=e.i(4205214),a=e.i(9739627),s=e.i(6038905);e.s(["DeploymentPlaceholderCard",0,function(){return(0,i.jsx)(s.default,{active:!1,className:"relative overflow-hidden border-0 border-y border-solid border-gray-400 @md-page:border-0",subtitle:"Once you're ready, start deploying to see the progress here…",title:"Deployment",children:(0,i.jsx)(a.Image,{alt:"Globe",className:"relative -bottom-2 -m-8 mt-4 w-[calc(100%+64px)] max-w-none",height:256,priority:!0,srcDark:"https://assets.vercel.com/image/upload/v1689795055/front/new/globe-outline-dark-2.svg",srcLight:"https://assets.vercel.com/image/upload/v1689795055/front/new/globe-outline-light.svg",width:688})})}],1315623);var n=e.i(57106);e.s(["ImportFooter",0,function(){return(0,i.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-y-4 px-2",children:[(0,i.jsx)(n.Link,{href:"/new",type:"secondary",children:"Import a different Git Repository →"}),(0,i.jsx)(n.Link,{href:"/new/templates",type:"secondary",children:"Browse Templates →"})]})}],6979900)},2251791,e=>{"use strict";var t=e.i(1853611),r=e.i(7780974),i=e.i(7562527),a=e.i(8660982),s=e.i(9871375),n=e.i(1177040),o=e.i(9385057),l=e.i(5677444);function c(e){let t=(0,a.useRef)((0,o.nanoid)());return(0,a.useEffect)(()=>{(0,a.startTransition)(()=>{e({type:"SET_FLOW_ID_ONCE",flowId:t.current})})},[e]),t.current}function u(){let e=(0,l.useSearchParams)(),t=(0,i.useRepoQuery)(),r=t?.template===i.VERCEL_TUTOR_TEMPLATE_NAME,s=(0,a.useMemo)(()=>t?`${t.owner}/${t.name}${t.subdir?`/${t.subdir}`:""}`:void 0,[t]),n=e?.get("from")==="templates";return{isVercelTutor:r,clonedFrom:s,templateSlug:e?.get("repository-name")??void 0,isTemplate:n}}e.s(["useCloneTrackBaseParams",0,u,"useCloneTrackStatusChanges",0,function(){let e=u(),{status:i,cloneRepoStatus:n,dispatch:o}=(0,s.useProjectCloneContext)(),l=(0,a.useRef)(null),d=(0,a.useRef)(n),m=c(o);(0,a.useEffect)(()=>{l.current!==i&&(l.current=i,t.analytics.track("new_project_clone_status_changed",{...e,flowId:m,status:i,legacyAction:r.VercelActivityAction.NewProjectCloneStatusChanged},{send_to:{data_warehouse_legacy:!0,product_analytics:!0}})),d.current!==n&&(d.current=n,t.analytics.track("new_project_clone_repo_status_changed",{...e,flowId:m,status:n,legacyAction:r.VercelActivityAction.NewProjectCloneRepoStatusChanged},{send_to:{data_warehouse_legacy:!0,product_analytics:!0}}))},[m,n,e,i])},"useImportTrackStatusChanges",0,function(){let{deploying:e,dispatch:i}=(0,n.useProjectImportContext)(),s=(0,a.useRef)(null),o=c(i);(0,a.useEffect)(()=>{s.current!==e&&null!==e&&(s.current=e,t.analytics.track("new_project_import_deploying_changed",{deploying:e,flowId:o,legacyAction:r.VercelActivityAction.NewProjectImportDeployingChanged},{send_to:{data_warehouse_legacy:!0,product_analytics:!0}}))},[e,o])}])}]);

//# debugId=737985bb-0d11-c241-6fe6-ca88e47ff6f4
//# sourceMappingURL=68bfd467cedfe861.js.map