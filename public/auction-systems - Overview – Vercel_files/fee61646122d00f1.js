;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="8572c26e-7d39-9fad-d593-ae1f8cb76508")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9042029,e=>{"use strict";var t=e.i(4205214),i=e.i(8660982),r=e.i(6891161),l=e.i(57106);e.s(["default",0,()=>{let[e,a]=(0,i.useState)(!1),n=(0,i.useRef)(null);return{confirm:(0,i.useCallback)(async e=>{if(!e?.includes("start"))return!0;a(!0);let t=await new Promise(e=>{n.current=e});return a(!1),t},[]),modal:(0,i.useMemo)(()=>(0,t.jsxs)(r.Modal.Modal,{active:e,onClickOutside:()=>n.current?.(!1),children:[(0,t.jsxs)(r.Modal.Body,{children:[(0,t.jsx)("header",{style:{textAlign:"center"},children:(0,t.jsx)("h1",{className:"text-copy-16",children:"Warning"})}),(0,t.jsxs)("main",{children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["You're trying to save a Build Command that contains the word ",'"start".']}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Please note that the Build Command is meant to be used for compiling source code, not starting a forever-running process."," ",(0,t.jsx)(l.Link,{external:!0,href:"/kb/guide/npm-run-start-not-working",type:"highlight",children:"Learn more"})]}),(0,t.jsx)("p",{className:"text-copy-14",children:"Are you sure you want to continue?"})]})]}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{onClick:()=>n.current?.(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(r.Modal.Action,{onClick:()=>n.current?.(!0),children:"Continue"})]})]}),[e])}}])},5527477,e=>{"use strict";var t=e.i(7966665),i=e.i(377478),r=e.i(4522500);e.s(["useImportUrlMachine",0,function(){let[e]=(0,i.default)(),l=(0,r.restoreQuery)(e),a=(0,t.default)(l.source);return{...a?{sType:a.type,sName:a.name,sPath:a.subdir,sOwner:a.owner,sBranch:a.branch,sSha:a.sha}:{},...l}}])},5797737,e=>{e.v({"fade-in":"custom-buttons-module__8sUwva__fade-in",fadeIn:"custom-buttons-module__8sUwva__fadeIn",turborepo:"custom-buttons-module__8sUwva__turborepo"})},8643060,e=>{e.v({border:"card-module__zTCk9W__border",cardSection:"card-module__zTCk9W__cardSection",footer:"card-module__zTCk9W__footer",noPadding:"card-module__zTCk9W__noPadding"})},6785390,e=>{e.v({details:"details-module__eTEHoW__details"})},9444673,e=>{e.v({noPadding:"legacy-env-variables-form-module__E3lP-W__noPadding",removeButton:"legacy-env-variables-form-module__E3lP-W__removeButton",removeButtonCell:"legacy-env-variables-form-module__E3lP-W__removeButtonCell",row:"legacy-env-variables-form-module__E3lP-W__row",table:"legacy-env-variables-form-module__E3lP-W__table",valueTextarea:"legacy-env-variables-form-module__E3lP-W__valueTextarea"})},6693189,e=>{e.v({details:"settings-module__zQ1M-G__details",disabled:"settings-module__zQ1M-G__disabled",input:"settings-module__zQ1M-G__input",installCommandDescription:"settings-module__zQ1M-G__installCommandDescription",label:"settings-module__zQ1M-G__label",settings:"settings-module__zQ1M-G__settings"})},3310008,e=>{e.v({active:"file-tree-module__O8ws-G__active",dir:"file-tree-module__O8ws-G__dir",dirName:"file-tree-module__O8ws-G__dirName",file:"file-tree-module__O8ws-G__file",fileName:"file-tree-module__O8ws-G__fileName",icon:"file-tree-module__O8ws-G__icon",indent:"file-tree-module__O8ws-G__indent",selected:"file-tree-module__O8ws-G__selected",statusIcon:"file-tree-module__O8ws-G__statusIcon",tree:"file-tree-module__O8ws-G__tree"})},2329301,e=>{e.v({monorepoManagerLogo:"main-import-module__GKZ5_a__monorepoManagerLogo"})},8228513,e=>{e.v({gradientOverlay:"page-with-gradient-module__0esGHW__gradientOverlay",importPageAdjustment:"page-with-gradient-module__0esGHW__importPageAdjustment",main:"page-with-gradient-module__0esGHW__main",newTitle:"page-with-gradient-module__0esGHW__newTitle"})},5746939,e=>{e.v({cardContent:"index-module__9CNWmG__cardContent",configureProjectContent:"index-module__9CNWmG__configureProjectContent",createTeamStep:"index-module__9CNWmG__createTeamStep",headerSpacer:"index-module__9CNWmG__headerSpacer",mainContent:"index-module__9CNWmG__mainContent",narrative:"index-module__9CNWmG__narrative",newMain:"index-module__9CNWmG__newMain",newMainContentWrapper:"index-module__9CNWmG__newMainContentWrapper",screenStyle:"index-module__9CNWmG__screenStyle",sidebarContainer:"index-module__9CNWmG__sidebarContainer"})},5187772,e=>{"use strict";var t=e.i(4205214),i=e.i(8660982),r=e.i(9722978),l=e.i(512540),a=e.i(5140444),n=e.i(5338940),s=e.i(5677444),o=e.i(1717203),d=e.i(7557283),c=e.i(6232213),u=e.i(1177040),m=e.i(746850),p=e.i(1752298),f=e.i(2523660),h=e.i(3070041),x=e.i(1991452),y=e.i(5468328),v=e.i(7045101),g=e.i(7562527),j=e.i(5797737),_=e.i(4298944),b=e.i(6038905),w=e.i(9187364),N=e.i(8248823),C=e.i(3243396),E=e.i(3496900),S=e.i(57106),T=e.i(4585051),k=e.i(3306538),I=e.i(2504781),P=e.i(6881349),O=e.i(3500331),R=e.i(3671642),A=e.i(8522580),D=e.i(5255926),L=e.i(9318197),M=e.i(1906681),G=e.i(455575),$=e.i(4004502),V=e.i(6352514),F=e.i(1853611),W=e.i(6198010),U=e.i(5433449),B=e.i(2988836),z=e.i(4450569),H=e.i(7374478),q=e.i(8643060);function Y(e){let{footer:i,border:l=!0,noPadding:a,children:n,className:s,...o}=e;return(0,t.jsx)("div",{className:(0,r.clsx)(q.default.cardSection,{footer:i,[q.default.footer]:i,[q.default.border]:l,[q.default.noPadding]:a},s),...o,children:n})}var J=e.i(2560270),Q=e.i(3603926),K=e.i(6785390);let X=(0,i.memo)(function(e){let{title:l,children:a,className:n,onClick:s,"data-testid":o,open:d,disableAnimation:c,...u}=e,m=(0,i.useRef)(!1),[p,f]=(0,i.useState)(!1),h=d??p;return(0,i.useEffect)(()=>{m.current=!0},[]),(0,t.jsx)(Q.AnimatedDiv,{friction:30,immediate:c||!m.current,initialHeight:"auto",tension:290,children:(0,t.jsxs)("details",{className:(0,r.clsx)(K.default.details,n),open:h,...u,children:[(0,t.jsxs)("summary",{"data-testid":o??(0,$.tid)("details","summary"),onClick:e=>{s&&(e.preventDefault(),s(e),f(!h))},children:[(0,t.jsx)(J.ChevronDown,{color:"gray-700",size:20}),l]}),a]})})});var Z=e.i(9334091),ee=e.i(5376191),et=e.i(9512272),ei=e.i(187815),er=e.i(9444673);let el=(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between gap-2 flex-initial flex-wrap",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[(0,t.jsx)("strong",{children:"TIP:"})," Paste a .env above to populate the form"]}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Environment Variables"})]})]}),ea=(0,t.jsxs)("p",{className:"text-copy-14",children:["You are using a System Environment Variable."," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables/system-environment-variables",type:"highlight",children:"Learn More"})]}),en=e=>{let{onSubmit:r,envName:l,setEnvName:a,envValue:n,setEnvValue:s,error:o,hideLabels:d,onBulkAdd:c,onRemove:u,description:m=e=>e?ea:el,disabled:p,explicitId:f}=e,h=(0,i.useRef)(null),x=(0,i.useMemo)(()=>(0,et.isSystemEnv)(l),[l]),v=(0,i.useCallback)(async e=>{e?.preventDefault(),await r?.(),h.current?.focus()},[r]),g=(0,i.useCallback)(async e=>{"Enter"!==e.key||e.shiftKey||await v(e)},[v]),j=(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial",children:["Value",(0,t.jsx)(y.Tooltip,{text:"Encrypted at rest",children:(0,t.jsx)(B.InformationFillSmall,{})})]});return(0,t.jsx)("form",{onSubmit:e=>void v(e),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:(0,t.jsx)(O.Input,{"aria-label":"Key",disabled:!a||p,error:a?o:null,label:d?void 0:"Key",onChange:e=>a?.(e.target.value||""),onPaste:e=>{let t=e.clipboardData.getData("text"),i=Object.entries((0,ei.parseEnv)(t));0!==i.length&&(c?.(i),e.preventDefault())},placeholder:"EXAMPLE_NAME",ref:e=>{h.current=e},value:l,width:"100%"})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:x?(0,t.jsx)(O.Input,{"aria-label":"Value",disabled:!0,label:d?void 0:j,placeholder:"Populated by System",value:"",width:"100%"}):(0,t.jsx)(Z.Textarea,{explicitId:f,"aria-label":"Value",className:er.default.valueTextarea,disabled:!s||p,error:o,label:d?void 0:j,onChange:e=>s?.(e.target.value||""),onKeyDown:e=>void g(e),placeholder:"I9JU23NF394R6HH",spellCheck:"false",value:n,width:"100%"})}),r?(0,t.jsx)(I.Button,{disabled:!l||!n,style:{marginTop:d?void 0:"32px"},typeName:"submit",children:"Add"}):null,u?(0,t.jsx)(I.Button,{"aria-label":"Remove",disabled:p,onClick:u,shape:"square",style:{marginTop:d?void 0:"32px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(ee.Minus,{})}):null]}),m?(0,t.jsx)(t.Fragment,{children:m(x)}):null]})})};var es=e.i(4307275),eo=e.i(8042625),ed=e.i(277234),ec=e.i(4244280),eu=e.i(7691989),em=e.i(6178534),ep=e.i(8188735);async function ef(e){let{repo:t,teamId:i,isPrivate:r}=e,l=`${ec.API_INTEGRATION_CONTROLLER}/github-create-repo${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(l,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function eh(e){let{repo:t,teamId:i,isPrivate:r}=e,l=`${ec.API_INTEGRATION_CONTROLLER}/gitlab/create-project${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(l,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function ex(e){let{repo:t,teamId:i,isPrivate:r}=e,l=`${ec.API_INTEGRATION_CONTROLLER}/bitbucket/create-project${(0,eo.encode)({teamId:i})}`;return(0,ed.fetchAPI)(l,{method:"POST",body:JSON.stringify({name:t,private:r}),throwOnHTTPError:!0})}async function ey(e){let{type:t,repo:i,teamId:r,isPrivate:l}=e;switch(t){case"github":return(await ef({repo:i,teamId:r,isPrivate:l})).id;case"gitlab":return(await eh({repo:i,teamId:r,isPrivate:l})).projectId;case"bitbucket":return(await ex({repo:i,teamId:r,isPrivate:l})).uuid;default:throw Error("Unsupported `type`.")}}var ev=e.i(5394280),eg=e.i(693385);async function ej(e){let{projectIdOrName:t,teamId:i}=e;return(0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v7")}/${encodeURIComponent(t)}${(0,eo.encode)({teamId:i})}`,{method:"DELETE",throwOnHTTPError:!0})}async function e_(e){let{teamId:t,projectName:i,type:r,host:l,ref:a,sha:n,repoId:s,owner:o,slug:d,source:c="import"}=e;return(0,ed.fetchAPI)(`${(0,ec.API_DEPLOYMENTS)("v13")}${(0,eo.encode)({teamId:t,skipAutoDetectionConfirmation:1})}`,{method:"POST",body:JSON.stringify({gitSource:{type:r,ref:a||"master",sha:n||void 0,repoId:"github"===r||"github-limited"===r||"github-custom-host"===r?s:void 0,host:"github-custom-host"===r?l:void 0,projectId:"gitlab"===r?s:void 0,owner:"bitbucket"===r?o:void 0,slug:"bitbucket"===r?d:void 0},name:i,target:"production",source:c}),throwOnHTTPError:!0})}async function eb(e){let{projectName:t,environmentVariables:i,teamId:r,projectSettings:l,gitRepository:a}=e;try{return await (0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v6")}${(0,eo.encode)({teamId:r,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({name:t,environmentVariables:i,gitRepository:a,...l}),throwOnHTTPError:!0})}catch(e){throw"invalid_build_command"===e.code||"invalid_output_directory"===e.code?e.step="buildSettings":e.key&&e.key.startsWith("environmentVariables")?e.step="envs":("invalid_project_name"===e.code||"name"===e.key)&&(e.step="projectName"),e}}async function ew(e){let{teamId:t,source:i,clone:r,isPrivate:l,projectName:a,projectSettings:n,envs:s,domains:o,deployHook:d,clonedRepoId:c,setClonedRepoId:u,setData:m,projectIdFromQuery:p}=e;if(!p)try{throw await (0,eu.getProjectInfo)({name:a,teamId:t}),Error(`Project "${a}" already exists, please use a new name.`)}catch(e){if(404!==e.status)throw e.step="projectName",e}let f=async()=>{if(!r)return i.repoId;if(c)return c;let e=r.owner?`${r.owner}/${r.repo}`:`${r.repo}`;return u(c=await ey({teamId:t,type:r.type,repo:e,isPrivate:l})),await (0,ev.pushRepo)({type:r.type,source:i.source,target:e,teamId:t}),c},h=null,x=async()=>{let e=r||i,l={type:"github-custom-host"===e.type?"github":e.type,repo:e.owner?`${e.owner}/${e.repo}`:`${e.repo}`,host:e.host,sourceless:!0};if(p){try{await (0,et.addEnvs)(p,s.map(e=>({...e,name:e.key})),t||void 0)}catch(e){if("ENV_ALREADY_EXISTS"===e.code){await Promise.all(s.map(async e=>{await (0,et.legacyRemoveEnv)(p,e,t||void 0)}));try{await (0,et.addEnvs)(p,s.map(e=>({...e,name:e.key})),t||void 0)}catch(e){throw e.step="envs",e}}else throw e.step="envs",e}try{await (0,ep.default)(p,t,n)}catch(e){throw e.step="buildSettings",e}await (e=>{let{id:t,teamId:i,gitRepository:r}=e;return(0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v9")}/${t}/link${(0,eo.encode)({teamId:i,withUserCredentials:1})}`,{method:"POST",body:JSON.stringify({type:r.type,repo:r.repo}),throwOnHTTPError:!0})})({id:p,teamId:t,gitRepository:l}),h=await (0,eu.getProject)({id:p,teamId:t})}else{let e=(0,et.addEncryptedEnvs)(s.map(e=>({...e,name:e.key})));h=await eb({projectName:a,environmentVariables:e,teamId:t,projectSettings:n,gitRepository:l})}m({projectName:a}),d&&await (0,em.createDeployHook)(h,t,d,r?"master":i.ref||"master")},y=async e=>{let l=await e_({teamId:t,projectName:a,type:r?r.type:i.type,host:r?r.host:i.host,ref:r?null:i.ref,sha:r?null:i.sha,repoId:e,owner:r?r.owner:i.owner,slug:r?r.repo:i.repo,source:r?"clone/repo":"import"});return l?(m({deployment:l.url}),l.id):null},v=async()=>{let e=h;o&&e&&await Promise.all(o.map(i=>(0,eg.addProjectDomain)({domain:i,project:{id:e.id},team:t?{id:t}:null}).catch(e=>{console.error("Failed to add domain to project:",e)})))},g=await f();return await x(),await v(),y(g)}var eN=e.i(6693189),eC=e.i(9042029),eE=e.i(5527477),eS=e.i(4298868),eT=e.i(1719521),ek=e.i(7743427),eI=e.i(6264863);let eP=(0,i.memo)(()=>(0,t.jsx)("div",{className:"jsx-660195507e5fa6fe line",children:(0,t.jsx)(eI.default,{id:"660195507e5fa6fe",children:".line.jsx-660195507e5fa6fe{border-top:1px solid var(--accents-2);margin:12px 20px}"})}));var eO=e.i(3207250),eR=e.i(4588064),eA=e.i(2280665),eD=e.i(7010772),eL=e.i(5432439),eM=e.i(9192668),eG=e.i(6475061),e$=e.i(8492314),eV=e.i(4030453),eF=e.i(6891161),eW=e.i(7087273),eU=e.i(3322724),eB=e.i(850302),ez=e.i(3657238);let eH=(e,t)=>e.type===t.type?e.name>t.name?1:-1:"dir"!==e.type?1:-1;async function eq(e){let t=await (0,ed.fetchAPI)(e,{throwOnHTTPError:!0});return t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(eH)??null}function eY(e){let{type:t,owner:i,repo:r,ref:l="",rootPath:a="",slug:n="",errorOn404:s=!1}=e;return(0,eB.default)(()=>t&&i&&r?function(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",n="gitlab"===e?encodeURIComponent(t):t,s="gitlab"===e?encodeURIComponent(i):i;return`${ec.API_INTEGRATION_CONTROLLER}/${e}/file-tree/${n}/${s}${(0,eo.encode)({rootPath:l,slug:a,ref:r,withUserCredentials:"1"})}`}(t,i,r,l,a,n):null,async e=>{let t,i=eq(e);try{t=await i}catch(e){if(!s&&404===e.status)return null;throw e}return t},{revalidateOnReconnect:!1,revalidateOnFocus:!1,dedupingInterval:1e4,refreshInterval:0})}eY.prefetch=async e=>{let t,{type:i,owner:r,repo:l,ref:a="",rootPath:n="",slug:s=""}=e;if(!i||!r||!l)return;let o=`${ec.API_INTEGRATION_CONTROLLER}/${i}/file-tree/${r}/${l}${(0,eo.encode)({rootPath:n,slug:s,ref:a,withUserCredentials:"1"})}`,d=(0,ed.fetchAPI)(o,{throwOnHTTPError:!0});try{t=await d}catch(e){404!==e.status&&console.error(e)}t&&(0,ez.mutate)(o,t.tree?.filter(e=>!e.name.startsWith(".")&&"dir"===e.type).sort(eH),!1)};var eJ=e.i(4345845),eQ=e.i(296955),eK=e.i(7173923),eX=e.i(3959677),eZ=e.i(5371931),e0=e.i(9222994);function e1(e){let{type:r,slug:l}=e,a=(0,i.useMemo)(()=>l.split("/").pop(),[l]),n=null,s="#";switch(r){case"github":n=(0,t.jsx)(eX.default,{height:16,width:16}),s="https://github.com/"+l;break;case"gitlab":n=(0,t.jsx)(eZ.default,{height:16,width:16}),s="https://gitlab.com/"+l;break;case"bitbucket":n=(0,t.jsx)(e0.default,{height:16,width:16}),s="https://bitbucket.org/"+l}return(0,t.jsx)(S.Link,{href:s,tab:!0,className:"min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,t.jsx)("div",{className:"shrink-0",style:{width:16,height:16},children:n}),(0,t.jsx)(eK.TruncateMiddle,{className:"text-copy-14 font-medium group-hover:underline",children:a??""})]})})}function e2(e){let{gitType:i,repo:r,branch:l,directory:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 mt-6",children:[i&&r?(0,t.jsx)(e1,{slug:r,type:i}):null,l?(0,t.jsxs)("div",{className:"flex text-gray-900 items-center gap-2 text-copy-14-mono shrink-0",children:[(0,t.jsx)(eJ.GitBranch,{size:16}),l]}):null,a?(0,t.jsxs)("div",{className:"flex items-center text-gray-900 gap-2 text-copy-14 shrink-0",children:[(0,t.jsx)(eQ.FolderClosed,{size:16}),a]}):null]})}var e4=e.i(6939507),e3=e.i(2259462),e9=e.i(8876434),e6=e.i(199192),e5=e.i(8735244),e7=e.i(1848296),e8=e.i(4147070),te=e.i(3310008);let tt=i.default.createContext([0,""]);function ti(){return(0,i.useContext)(tt)}tt.displayName="FileTreeContext";let{Provider:tr}=tt,tl=i.default.createContext(["",()=>{}]);function ta(){return(0,i.useContext)(tl)}tl.displayName="SelectedContext";let tn=e=>{let{selected:i}=e;return i?(0,t.jsx)(e6.ChevronRightSmall,{className:"rotate-90"}):(0,t.jsx)(e6.ChevronRightSmall,{})},ts=e=>{let{selected:i,setSelected:r,children:l}=e;return(0,t.jsx)("div",{className:te.default.tree,children:(0,t.jsx)(tl.Provider,{value:[i,r],children:(0,t.jsx)(tr,{value:[0,""],children:l})})})},to=i.default.memo(e=>{let{name:r,nameSlug:l,open:a,children:n,defaultOpen:s,onToggle:o,framework:d,loading:c,rootLevel:u}=e,[m,p]=ta(),[f,h]=ti(),x=(0,i.useRef)(!1),y=m===(h=(h?h+"/":"")+r),v=!y&&m.startsWith(h+"/"),[g,j]=(0,i.useState)(s||y||!1),_=v||(void 0===a?g:a),b=(0,i.useCallback)(()=>{x.current=!0;let e=!0;!y&&(p(h),_&&(e=!1)),e&&(o&&o(!_),j(!_))},[_,y,h,o,p]),w=(0,i.useCallback)(e=>{"Enter"===e.key&&b()},[b]);return(0,t.jsxs)("li",{className:te.default.dir,children:[(0,t.jsxs)("a",{className:y?te.default.selected:void 0,onClick:b,onKeyPress:w,title:r,children:[(0,t.jsxs)("span",{className:"flex min-w-0 items-center",children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:11*f,...u&&{marginRight:-25}}}),!u&&(0,t.jsx)("span",{className:te.default.statusIcon,children:(0,t.jsx)(tn,{selected:_})}),(0,t.jsx)("span",{className:te.default.icon,children:(0,t.jsx)(e7.RadioGroup,{label:r,onChange:()=>{},value:y?r:"",children:(0,t.jsx)(z.default,{children:(0,t.jsx)(e7.RadioGroup.Item,{value:r,children:l??r})})})})]}),(0,t.jsxs)("span",{className:"flex size-[24px] items-center justify-center",children:[c?(0,t.jsx)(e5.Spinner,{}):null,!c&&d?(0,t.jsx)(td,{framework:d}):null]})]}),(0,t.jsx)(Q.AnimatedDiv,{allowOverview:!0,immediate:!0,overflowVisible:!0,children:(0,t.jsx)("ul",{style:{height:_?void 0:0,overflow:"hidden"},children:(0,t.jsx)(tr,{value:[f+1,h],children:n})})})]})});function td(e){let{framework:i}=e,r=(0,e8.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)("img",{alt:"Framework logo",height:24,src:r,width:24})}to.displayName="Folder";let tc=i.default.memo(e=>{let{name:i,active:l,type:a="file",...n}=e,[s]=ti();return(0,t.jsx)("li",{className:(0,r.clsx)(te.default.file,{[te.default.active]:l}),children:(0,t.jsxs)("a",{...n,children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:25*s}}),(0,t.jsx)("span",{className:te.default.icon,style:{top:13},children:"lambda"===a?(0,t.jsx)(e4.Lambda,{size:22}):(0,t.jsx)(e3.File,{size:22})}),(0,t.jsx)("span",{className:te.default.fileName,title:"string"==typeof i?i:"",children:i})]})})});tc.displayName="File";let tu=i.default.memo(()=>{let[e]=ti();return(0,t.jsx)("li",{style:{pointerEvents:"none"},children:(0,t.jsxs)("a",{children:[(0,t.jsx)("span",{className:te.default.indent,style:{width:25*e}}),(0,t.jsx)("span",{className:te.default.icon,children:(0,t.jsx)(e9.MoreHorizontal,{})}),(0,t.jsx)("span",{className:te.default.fileName,children:"Additional files not shown"})]})})});tu.displayName="Cutoff";var tm=e.i(6913536);function tp(e){let{isDir:r,rootLevel:l,type:a,owner:n,repo:s,branch:o,rootPath:d,teamSlug:c,framework:u,allFrameworks:m,...p}=e,[f]=ta(),h=ti()[1],x=(0,g.useRepoQuery)(),y=(h?h+"/":"")+p.name,{data:v}=(0,eR.default)({provider:a,owner:n,name:s,customGitHost:"github-custom-host"===a?x?.host:void 0}),j=f===y||f.startsWith(y+"/"),[_,b]=(0,i.useState)(!1),w=_||j,{data:N}=eY(w?{type:a,owner:n,repo:s,ref:o,rootPath:d,slug:c}:{}),C=(0,i.useMemo)(()=>{let e=0;return N?.reduce((t,i)=>"dir"===i.type?[...t,i]:e<10?(e+=1,[...t,i]):t.find(e=>e.cutoff)?t:[...t,{cutoff:!0}],[])},[N]),{data:E}=(0,eO.default)((0,tm.default)(x,v?.defaultBranch,d)),S=E?.framework.slug,T=void 0===S&&r&&!l&&!u,k=(0,i.useMemo)(()=>m.find(e=>e.slug===S)||null,[m,S]);return(0,t.jsx)(to,{...p,framework:k,loading:w&&void 0===N||T,rootLevel:l,children:C?.map(e=>"dir"===e.type?(0,t.jsx)(tp,{allFrameworks:m,branch:o,framework:u||k,isDir:!0,name:e.name,onToggle:b,owner:n,repo:s,rootPath:d?d+"/"+e.name:e.name,teamSlug:c,type:a},e.name):e.cutoff?(0,t.jsx)(tu,{}):(0,t.jsx)(tc,{name:e.name},e.name))||null})}let tf=e=>{let{active:r,onCancel:l,onContinue:a,frameworks:o,initialPath:d=""}=e,c=(0,eU.useIsMobile)(),u="./"===d,m=d.startsWith("/")?d.substring(1):d,[p,f]=(0,i.useState)(u?"":m),{team:h}=(0,n.useTeam)(),x=(0,g.useRepoQuery)(),[y,v]=(0,i.useState)(null),j=p||"",_=x?.name+(j?"/"+j:""),b=(0,i.useCallback)(()=>{v(null)},[]),w={type:x?.type,owner:x?.owner,repo:x?.name,rootPath:p,slug:h?.slug,ref:x?.branch};!function(e){let{type:t,owner:r,repo:l,ref:a,rootPath:n,slug:o}=e,d=(0,s.useSearchParams)();(0,i.useEffect)(()=>{if(n){let e=n.split("/"),i="";eY.prefetch({type:t,owner:r,ref:a,repo:l,slug:o});for(let n=0;n<e.length;n++){let s=e[n];eY.prefetch({type:t,owner:r,repo:l,ref:a,rootPath:i+s,slug:o}),i+=s+"/"}}},[d])}(w);let{data:N}=eY(w);return(0,t.jsx)(eF.Modal.Modal,{active:r,onAnimationDone:b,onClickOutside:l,width:"480px",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault()},children:[(0,t.jsxs)(eF.Modal.Body,{padding:!1,children:[(0,t.jsx)(eF.Modal.Header,{children:(0,t.jsxs)("div",{className:"px-6 pt-6",children:[(0,t.jsx)(eF.Modal.Title,{children:"Root Directory"}),(0,t.jsx)(eF.Modal.Subtitle,{children:"Select the directory containing your source code. For monorepos, create a separate project for each directory you want to deploy."}),(0,t.jsx)(e2,{branch:x?.branch||"",gitType:x?.type||"",repo:x?.fullName||""}),y?(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(eV.Error,{error:y})}):null]})}),(0,t.jsx)(eW.Scroller,{height:c?"auto":280,className:"border-t border-gray-alpha-400",overlayClassName:"[&::after]:!bg-[position:_calc(100%+40px)_bottom]",overflow:"y",children:(0,t.jsx)(ts,{selected:_,setSelected:e=>{let t=x?.name.split("/").length;f(e.split("/").slice(t).join("/"))},children:x?(0,t.jsx)(tp,{allFrameworks:o,branch:x.branch,isDir:!0,name:x.name,nameSlug:(0,t.jsxs)(t.Fragment,{children:[x.name," ",(0,t.jsx)("span",{className:"text-gray-800",children:"(root)"})]}),open:!0,owner:x.owner,repo:x.name,rootLevel:!0,teamSlug:h?.slug,type:x.type}):null})})]}),(0,t.jsxs)(eF.Modal.Actions,{children:[(0,t.jsx)(eF.Modal.Action,{"data-testid":(0,$.tid)("root-directory-modal","cancel"),onClick:l,type:"secondary",children:"Cancel"}),(0,t.jsx)(eF.Modal.Action,{"data-testid":(0,$.tid)("root-directory-modal","continue"),disabled:null===N,onClick:async()=>{F.analytics.track(V.AnalyticsEvent.PROJECT_CREATION_SELECTED_ROOT_DIRECTORY,{version:3}),a(p)},children:"Continue"})]})]})})};e.i(2148360);var th=e.i(7259833),tx=e.i(8334396);function ty(e){let{gitType:i}=e,{text:r,openModal:l,scopedTeam:a}=(0,th.useUpgradeToProButton)({trialBehavior:"choose",buttonText:{desired:"Start a Pro Trial",fallback:"Upgrade to Pro"}});return a?.billing?.plan!=="hobby"?null:(0,t.jsxs)(A.Note,{action:(0,t.jsx)(I.Button,{onClick:()=>l({source:"import",disabledSteps:["team-members"]}),size:"small",children:r}),fill:!0,label:!1,type:"success",children:["You are attempting to import a Git repository from a private"," ",(0,tx.getGitProviderNameAndOrg)(i),". To collaborate with your team members, a Pro subscription is required."]})}var tv=e.i(4909757),tg=e.i(7102400),tj=e.i(2138061),t_=e.i(458149),tb=e.i(5615087),tw=e.i(9739627),tN=e.i(7749365),tC=e.i(3228096),tE=e.i(8617276),tS=e.i(9645681),tT=e.i(4830423),tk=e.i(4989041),tI=e.i(6676443),tP=e.i(3622411),tO=e.i(4333930);let tR={node:tS.FunctionNode,python:tT.FunctionPython,go:tk.FunctionGo,rust:tI.FunctionRust,ruby:tP.FunctionRuby},tA={web:{icon:tC.Globe,label:"Web",tooltipSuffix:"service"},cron:{icon:tN.Clock,label:"Cron",tooltipSuffix:"cron job"},worker:{icon:tE.Servers,label:"Worker",tooltipSuffix:"background worker"}},tD={web:0,worker:1,cron:2};function tL(e){let{framework:i,size:r=20}=e,l=(0,e8.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)(tw.Image,{alt:i.name,className:"rounded-full shrink-0",height:r,srcDark:l,srcLight:l,width:r})}function tM(e){let i,{service:r,frameworks:l}=e;if(r.framework){let e=l.find(e=>e.slug===r.framework);e&&(i=e)}if(!i&&r.runtime){let e=l.find(e=>e.slug===r.runtime);e&&!e.runtimeFramework&&(i=e)}let a=i;!a&&r.runtime&&(a=l.find(e=>e.slug===r.runtime)),a||(a=l.find(e=>null===e.slug));let n="cron"===r.type&&r.schedule?r.schedule:"worker"===r.type&&r.topic?r.topic:r.routePrefix||`/${r.workspace}`,s=tA[r.type],o=s.icon,d=r.runtime?tR[r.runtime]||tO.FunctionSquare:null,c=r.runtime?r.runtime.charAt(0).toUpperCase()+r.runtime.slice(1):"";return(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-background-100 border border-gray-400 rounded py-3 px-4",children:[a?(0,t.jsx)(tL,{framework:a,size:20}):null,(0,t.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0 flex-1",children:[(0,t.jsx)("span",{className:"text-label-14 font-medium text-gray-1000",children:r.name}),(0,t.jsx)("span",{className:"flex items-center gap-1.5 text-copy-13 text-gray-900",children:(0,t.jsx)("span",{className:"font-mono",children:n})})]}),i?(0,t.jsx)(k.Badge,{variant:"gray-subtle",className:"cursor-default",children:i.name}):d?(0,t.jsxs)(k.Badge,{title:`${c} ${s.tooltipSuffix}`,variant:"gray-subtle",className:"cursor-default",children:[(0,t.jsx)(o,{size:12}),(0,t.jsx)(d,{size:12})]}):null]})}function tG(e){let{services:i,frameworks:r}=e,l=[...i].sort((e,t)=>{let i=tD[e.type]-tD[t.type];return 0!==i?i:!e.framework-!t.framework});return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:l.map(e=>(0,t.jsx)(tM,{frameworks:r,service:e},e.name))})}let t$=(e,t)=>e.reduce((e,i)=>((e[i[t]]=e[i[t]]||[]).push(i),e),{});function tV(e){let{field:r,name:l,description:a,framework:n,deploying:s,projectSettings:o,setProjectSettings:d,defaultValue:c="",shouldOverride:u,setShouldOverride:m,disabled:p}=e,f=(0,i.useRef)(null),h=(0,t.jsx)(M.Toggle,{checked:u[r],disabled:p||s,icon:{checked:(0,t.jsx)(E.PencilEdit,{color:"gray-1000",size:10}),unchecked:(0,t.jsx)(E.PencilEdit,{color:"gray-1000",size:10})},label:"Override",onChange:e=>{var t;m(t=>({...t,[r]:!!e})),e&&!o[r]&&d({...o,[r]:((t=n?.settings[r])&&"value"in t?t.value:null)||""}),setTimeout(()=>{e&&f.current&&f.current.select()},30)},size:"large"});return(0,t.jsx)(z.default,{"data-testid":(0,$.tid)(l,"field"),halfGap:!0,row:!0,children:(0,t.jsxs)(z.default,{halfGap:!0,children:[(0,t.jsxs)(z.default,{noWrap:!0,row:!0,style:{maxWidth:180,minWidth:180,whiteSpace:"nowrap",marginBottom:-8},vcenter:!0,children:[(0,t.jsx)("span",{className:"text-label-12 m-0",children:l}),(0,t.jsx)(L.Spacer,{x:.25}),(0,t.jsx)(y.Tooltip,{text:a,children:(0,t.jsx)(B.InformationFillSmall,{})})]}),(0,t.jsx)(z.default,{children:(0,t.jsx)(O.Input,{"aria-label":l,disabled:p||!u[r]||s,onChange:e=>d({...o,[r]:e.target.value}),placeholder:c||n?.settings[r].placeholder||n?.settings[r].value||"",ref:f,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))"},suffix:h,suffixStyling:!1,value:(p||u[r])&&o[r]||"",width:"100%"})})]})})}let tF="env_value_input_";function tW(e,t){switch(t.type){case"SET_ENV_NAME":return{...e,envName:t.envName};case"SET_ENV_VALUE":return{...e,envValue:t.envValue};case"ADD":return{...e,envs:[...e.envs,{id:(0,C.uniqueId)("env_"),key:e.envName,value:e.envValue,system:(0,et.isSystemEnv)(e.envName)}],envName:"",envValue:""};case"BULK_ADD":{let i=t.parsedEnvs.map(e=>{let[t,i]=e;return{id:(0,C.uniqueId)("env_"),key:t,value:i,system:(0,et.isSystemEnv)(t)}});return{...e,envs:[...e.envs,...i]}}case"REMOVE":return{...e,envs:e.envs.filter(e=>e.id!==t.id)};case"UPDATE_ENV_NAME":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,key:t.name}:e)};case"UPDATE_ENV_VALUE":return{...e,envs:e.envs.map(e=>e.id===t.id?{...e,value:t.value}:e)};case"PREFILL_MISSING_ENV_VAR":{let i={id:(0,C.uniqueId)("env_"),key:t.name,value:"",system:(0,et.isSystemEnv)(t.name)};if(0===e.envs.length)return{...e,envOpen:!0,envs:[i]};if(1===e.envs.length){let i=e.envs[0];if(""===i.key&&""===i.value)return{...e,envOpen:!0,envs:[{...i,key:t.name}]}}if(e.envs.some(e=>e.key===t.name))return{...e,envOpen:!0};return{...e,envOpen:!0,envs:[...e.envs,i]}}case"ERROR":return{...e,envError:t.envError,envOpen:!0};case"TOGGLE_DETAILS":return{...e,envOpen:!e.envOpen};case"START_DEPLOYING":return{...e,envError:null};default:throw Error()}}let tU=["repo_links_exceeded_limit","too_many_projects"];async function tB(e){let{template:t,clone:i,type:r,host:l,path:a,selectedPath:n,owner:s,repo:o,ref:d,state:c,selected:u,projectSettings:m,setDeploying:p,setLoading:f,setRequiredEnvs:h,teamId:x,source:y,envs:v,isPrivate:g,projectName:j,deployHook:_,toasts:b,envVariablesDispatch:w,requiredEnvs:C,requiredEnvNames:E,repoId:S,setProjectSettingsError:T,setProjectSettingsOpen:k,confirmBuildCommand:I,qsProjectName:P,dispatch:O,setProjectNameError:R,clonedRepoId:A,setClonedRepoId:D,setGenericError:L,projectIdFromQuery:M,domains:G}=e,$=m?.buildCommand;if(!await I($))return;O({type:"SET_DEPLOYMENT_ID",deploymentId:null}),f(!0),w({type:"START_DEPLOYING"}),R(null),T(null),L(null);let V=!1,F=[];if(E)for(let e of E)C[e]?.value||(0,et.isSystemEnv)(e)?F.push({key:e,value:C[e]?.value??""}):(h(t=>({...t,[e]:{value:"",error:"Required"}})),V=!0);if(V){f(!1),p(!1);return}let W=[...v,...F];try{let e;P&&!M&&await ej({projectIdOrName:P,teamId:x}),(e=i||t?await ew({teamId:x,source:{type:r,host:l,source:y,repoId:S,owner:s,repo:o,ref:d},clone:{type:c.type,repo:c.repo,owner:c.owner},isPrivate:g,domains:G,projectName:j,deployHook:_,projectSettings:{framework:u||null,devCommand:null,rootDirectory:n||null,publicSource:!g,...m},envs:W,clonedRepoId:A,setClonedRepoId:D,setData:()=>{},projectIdFromQuery:M}):await ew({teamId:x,source:{owner:s,type:r,host:l,repo:o,repoId:S,ref:d},isPrivate:g,projectName:j,deployHook:_,projectSettings:{framework:u||null,devCommand:null,rootDirectory:a||null,...m},domains:G,envs:W,clonedRepoId:A,setClonedRepoId:D,setData:()=>{},projectIdFromQuery:M,clone:null}))&&(O({type:"SET_DEPLOYMENT_ID",deploymentId:e}),p(!0))}catch(e){p(!1),(0,eA.isProjectsError)(e)&&"steps"in e?"envs"===e.step?w({type:"ERROR",envError:e}):"buildSettings"===e.step?(T((0,N.errorToString)(e)),k(!0)):"projectName"===e.step&&R(e):(0,eA.isProjectsError)(e)&&(tU.includes(e.code)||"action"in e&&e.link)?L(e):b.error((0,N.errorToString)(e))}finally{f(!1)}}function tz(e){let{slug:i,totalEnvs:r}=e,{data:l}=(0,ek.useIntegration)(i);return(0,t.jsxs)(z.default,{noWrap:!0,row:!0,children:[l?.icon?(0,t.jsx)(T.Avatar,{hash:l?.icon,size:20}):(0,t.jsx)(T.Avatar,{placeholder:!0,size:20}),(0,t.jsx)(L.Spacer,{inline:!0,x:.2}),(0,t.jsxs)("span",{className:"text-copy-16",style:{color:"var(--accents-5)"},children:[l?.website?(0,t.jsx)(S.Link,{external:!0,href:l?.website,children:(0,t.jsx)("b",{children:l?.name})}):(0,t.jsx)("b",{children:l?.name})," ","added ",r," Environment Variable",r>1?"s":""]})]})}let tH=function(e){let{frameworks:l=[],canCreateProject:s}=e,{user:o}=(0,a.useUser)(),d=(0,G.useToasts)(),c=(0,b.useCardContext)(),[m,p]=(0,i.useState)(!1),[f,h]=(0,i.useState)(null),{clone:y,deploymentError:_,"project-name":w,"project-id":N,"production-deploy-hook":E,...T}=(0,eE.useImportUrlMachine)(),{isReady:L,query:M}=(0,x.useRouter)(),{projectName:B,framework:q,path:J,buildCommand:Q,outputDirectory:K,installCommand:Z,domain:ee}=M,et=B?String(B):void 0,er=Array.isArray(ee)?ee:ee?[ee]:void 0,el=q?String(q):void 0,ea=J?String(J):void 0,eu=Q?String(Q):void 0,em=K?String(K):void 0,ep=Z?String(Z):void 0,ef=(0,g.useRepoQuery)(),{data:eh}=(0,v.useDetectEligibleProjects)(ef?.url),ex=eh?.monorepoManager,{deploying:ey,deploymentId:ev,rootDirectory:eg,dispatch:ej}=(0,u.useProjectImportContext)(),{data:e_}=(0,eR.default)({provider:ef?.type,name:ef?.name,customGitHost:ef?.host,owner:ef?.owner}),{selectedTeamSlug:eb,isCreatingTeam:ew,isSelectedTeamSlugReady:ek,onTeamSlugChange:eI,selectedTeamError:eA}=(0,tv.useSelectedTeamSlug)({gitProvider:e_?.provider,gitNamespaceId:e_?.owner.id,gitNamespaceSlug:e_?.namespace}),{team:eV}=(0,n.useTeam)(eb),eF=eV?.billing?.plan==="hobby",eW=e_?.ownerType==="team",eU=!!e_?.private,eB=eW&&eU&&eF,{showUpgradeCTA:ez,upgradeMessage:eH,setFreezeUpgradeUI:eq,disallowHobby:eY}=(0,eG.useUpgradeCTA)({selectedTeamSlug:eb,isCreatingTeam:ew,isTeamRepo:eW,isPrivate:eU,gitType:e_?.provider}),eJ=eh?.projects.find(e=>e.path===`/${eg??""}`)??null,[eQ,eK]=(0,i.useState)(void 0);(0,i.useEffect)(()=>{L&&!el&&ef&&eK((0,tm.default)(ef,void 0,ea))},[L]);let{data:eX,isLoading:eZ}=(0,eO.default)(eQ),{data:e0,isLoading:e1,shouldDetect:e2}=(0,tb.default)(ef?.url),{data:e4}=function(e){let{user:t}=(0,a.useUser)();return(0,eD.default)(()=>t&&!t.limited&&e?`${ec.API_INTEGRATION_CONTROLLER}/detect-vercel-configuration${(0,eo.encode)({url:e})}`:null,e=>(0,ed.fetchAPI)(e,{throwOnHTTPError:!0}))}(ef?.url),e3=e4?.settings,e9=!el&&eZ,e6=!!(c.active&&!e9);(0,i.useEffect)(()=>{c.active&&ej({type:"SET_CONFIGURE_PROJECT",configureProject:!0})},[c.active,ej]);let[e5,e7]=(0,i.useState)(l.find(e=>e.slug===(e3?.framework==="other"?null:e3?.framework))??null);function e8(e){ej({type:"SET_DEPLOYING",deploying:e})}(0,i.useEffect)(()=>{"other"===el?e7(l.find(e=>null===e.slug)??null):el&&e7(l.find(e=>e.slug===el)??null)},[el,l]),(0,i.useEffect)(()=>{eX&&e7(eX.framework)},[eX]);let te=ea||ef?.subdir,tt=ef?.branch||e_?.defaultBranch;(0,i.useEffect)(()=>{te&&ej({type:"SET_ROOT_DIRECTORY",rootDirectory:te})},[te,ej]);let ti=(0,i.useMemo)(()=>{if(ef?.name)return(0,tj.sanitizeProjectName)(ef.name)},[ef?.name]),[tr,tl]=(0,i.useState)(ti),ta=(0,eL.useGetProjectName)();(0,i.useEffect)(()=>{async function e(){tl(await ta(eV?.id,w))}w&&eV?.id&&e()},[w,eV?.id]);let[tn,ts]=(0,i.useState)(null),[to,td]=(0,i.useState)({buildCommand:e3?.buildCommand??eu??null,outputDirectory:e3?.outputDirectory??em??null,installCommand:e3?.installCommand??ep??null}),[tc,tu]=(0,i.useState)({buildCommand:"string"==typeof e3?.buildCommand||e3?.buildCommand===null||"string"==typeof eu&&void 0===ex,outputDirectory:"string"==typeof e3?.outputDirectory||e3?.outputDirectory===null||"string"==typeof em&&void 0===ex,installCommand:"string"==typeof e3?.installCommand||e3?.installCommand===null||"string"==typeof ep&&void 0===ex}),[tp,th]=(0,i.useState)(!1),[tx,tw]=(0,i.useState)(null),{confirm:tN,modal:tC}=(0,eC.default)(),[tE,tS]=(0,i.useState)(null),{missingEnvVarKey:tT,setMissingEnvVarKey:tk}=(0,t_.useOpenMissingEnvVar)(),[{envs:tI,envError:tP,envOpen:tO},tR]=(0,i.useReducer)(tW,{envName:"",envValue:"",envs:[{id:(0,C.uniqueId)("env_"),key:"",value:"",system:!1}]}),tA=T.env?.split(",")??[],tD=T.envDescription,tL=T.envLink,[tM,tU]=(0,i.useState)({}),[tH,tq]=(0,i.useState)(!1),tY=ef?.name,tJ=ef?.template;(0,i.useLayoutEffect)(()=>{tT&&(tR({type:"PREFILL_MISSING_ENV_VAR",name:tT}),setTimeout(()=>{let e=document.getElementById(`${tF}${tT}`);if(e){let t=e.closest("details");t?t.scrollIntoView({behavior:"smooth",block:"center"}):e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus()}},100),tk(null))},[tT,tk,tR,tI[0]?.id]),(0,i.useEffect)(()=>{td({buildCommand:e3?.buildCommand??eu??null,outputDirectory:e3?.outputDirectory??em??null,installCommand:e3?.installCommand??ep??null}),tu({buildCommand:"string"==typeof e3?.buildCommand||e3?.buildCommand===null||"string"==typeof eu&&void 0===ex,outputDirectory:"string"==typeof e3?.outputDirectory||e3?.outputDirectory===null||"string"==typeof em&&void 0===ex,installCommand:"string"==typeof e3?.installCommand||e3?.installCommand===null||"string"==typeof ep&&void 0===ex}),tl(w||tJ||tY||"")},[eu,ex,em,tY,tJ,w,ep,e3?.buildCommand,e3?.outputDirectory,e3?.installCommand]),(0,i.useEffect)(()=>{e5?.slug!==null&&tu({buildCommand:"string"==typeof e3?.buildCommand||e3?.buildCommand===null||"string"==typeof eu&&void 0===ex,outputDirectory:"string"==typeof e3?.outputDirectory||e3?.outputDirectory===null||"string"==typeof em&&void 0===ex,installCommand:"string"==typeof e3?.installCommand||e3?.installCommand===null||"string"==typeof ep&&void 0===ex})},[e5]);let{data:tQ}=(0,e$.useNewDeploymentInterval)(ev),tK=function(e){let{deploymentId:t}=e,[r,l]=(0,i.useState)(!1),{team:a}=(0,n.useTeam)(),{data:s}=(0,e$.useNewDeploymentInterval)(t);async function o(){r&&s?.projectId&&(await (0,ed.fetchAPI)(`${(0,ec.API_PROJECTS_VERSION)("v9")}/${s.projectId}${(0,eo.encode)({teamId:a?.id})}`,{method:"DELETE",throwOnHTTPError:!0}),l(!1))}return(0,i.useEffect)(()=>{switch(s?.readyState){case"CANCELED":case"ERROR":(0,i.startTransition)(()=>{l(!0)})}},[s]),o}({deploymentId:ev});(0,i.useEffect)(()=>{tQ&&("CANCELED"===tQ.readyState||"ERROR"===tQ.readyState?e8(!1):tQ.readyState&&e8(!0))},[tQ]),(0,i.useEffect)(()=>{_&&e8(!1)},[_]);let{data:tX}=(0,eS.default)(N),tZ=tX?.envs.filter(e=>e.configurationId),{data:t0}=(0,eT.default)(N),t1=t$(tZ||[],"configurationId"),t2=t$(t0?.integrations?.filter(e=>tZ&&tZ.map(e=>e.configurationId).includes(e.id))||[],"slug"),t4=[];for(let[e,t]of Object.entries(t2)){let i=t1[t[0].id].length;t4.push({slug:e,totalEnvs:i})}let t3=async e=>{ew&&e&&eI(e.slug),await tK(),await tB({template:ef?.template,clone:y,type:ef?.type,host:ef?.host,path:eg||te,selectedPath:eg,owner:ef?.owner,repo:ef?.name,ref:tt,deployHook:E,state:T,domains:er,selected:e5?.slug??null,projectSettings:{outputDirectory:em??tc.outputDirectory?to.outputDirectory:null,buildCommand:(eu??tc.buildCommand)&&eJ?.settings.buildCommand!==to.buildCommand?to.buildCommand:null,installCommand:(ep??tc.installCommand)&&eJ?.settings.installCommand!==to.installCommand?to.installCommand:null},setDeploying:e8,setLoading:tq,setRequiredEnvs:tU,teamId:ew&&e?e.id:eV?.id,userId:o?.uid,source:ef?.url,envs:tI.filter(e=>""!==e.id&&""!==e.key&&""!==e.value),isPrivate:eU,projectName:tr,toasts:d,envVariablesDispatch:tR,requiredEnvs:tM,requiredEnvNames:tA,repoId:e_?.id,setProjectSettingsError:tw,setProjectSettingsOpen:th,confirmBuildCommand:tN,qsProjectName:et,dispatch:ej,setProjectNameError:ts,clonedRepoId:f,setClonedRepoId:h,setGenericError:tS,projectIdFromQuery:N})},t9=eb&&eb===eV?.slug?eA:null,t6=eb&&eb===eV?.slug&&eV.billing?.plan==="hobby"?eH:null,t5=(0,i.useRef)(eb?{[eb]:ez}:{});(0,i.useEffect)(()=>{eb&&(t5.current[eb]||(t5.current[eb]=ez))},[ez,eb]);let t7=!!(!ey&&(_||ev)),t8=(0,i.useMemo)(()=>eb&&t5.current[eb]?!t7:!!eA||!!eB||!!ey||!s||!e6,[eb,e6,ey,t7,eB,eA,s]),ie=(0,i.useRef)(null);return(0,t.jsxs)("div",{className:(0,r.clsx)("flex flex-col items-stretch justify-start gap-6 flex-initial expand-mobile",eN.default.settings),children:[(0,t.jsx)(eM.GitRepositoryEntity,{action:"importing",frameworks:l}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Choose where you want to create the project",N?".":" and give it a name."]}),(0,t.jsx)(Y,{border:!1,className:"expand-mobile",style:{padding:0},children:(0,t.jsx)(tg.AnimateChangeInHeight,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col @md-page:flex-row items-stretch justify-start gap-4 @md-page:gap-0 flex-initial w-full",children:[(0,t.jsx)(R.Label,{style:{flex:1},value:"Vercel Team",children:(0,t.jsx)(tv.TeamSelector,{disabled:!!(tH||!e6||ey),gitNamespaceId:e_?.owner.id,gitNamespaceSlug:e_?.namespace,gitProvider:e_?.provider,loading:!ek,onChange:eI,value:eb})}),N?null:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-hide-on-mobile translate-y-8",children:(0,t.jsx)(H.SlashDivider,{})}),(0,t.jsx)(R.Label,{style:{flex:1,display:N?"none":"initial"},value:"Project Name",children:(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden"},children:(0,t.jsx)(O.Input,{"aria-label":"New Project Name",autoFocus:!0,className:(0,r.clsx)("new-project-name",eN.default.input),disabled:ey||"string"==typeof ev||tH||!e6,error:tn,id:"new-project-name",maxLength:100,onChange:e=>tl(e.target.value),placeholder:"my-project",value:tr||"",width:"100%"})})})]}),tE?(0,t.jsx)(A.Note,{fill:!0,type:"error",children:tE.message}):null,t9?(0,t.jsx)(A.Note,{fill:!0,type:"secondary",children:t9}):null,t6?(0,t.jsx)(A.Note,{fill:!0,type:"secondary",children:t6}):null,ez?(0,t.jsx)(eG.UpgradeCTA,{disallowHobby:eY,onSubmit:t3,selectedTeamSlug:eb,setFreezeUpgradeUI:eq}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(R.Label,{value:"Application Preset",children:(0,t.jsx)(D.Skeleton,{show:!ek||!e5||e2&&e1,style:{overflow:ek?void 0:"hidden"},children:(0,t.jsxs)(P.Combobox,{clearable:!1,disabled:!!(e3?.framework||!e6||ey||tH),noRawSelectedValue:!0,onChange:e=>{let t=l.find(t=>t.slug===("other"===e?null:e));t&&e7(t)},value:e5?.slug||"other",children:[(0,t.jsx)(P.Combobox.Input,{className:eN.default.input,"data-testid":(0,$.tid)("framework","select")}),(0,t.jsx)(P.Combobox.List,{children:(0,t.jsx)(es.FrameworkComboboxList,{frameworks:l})})]})})}),e5?.slug==="services"&&e0?.services&&e0.services.length>0?(0,t.jsx)(tG,{frameworks:l,services:e0.services}):null,(0,t.jsx)(R.Label,{value:"Root Directory",children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden",width:"100%"},children:(0,t.jsx)(O.Input,{"aria-label":"Root Directory",className:eN.default.input,disabled:!0,style:{fontFamily:"var(--font-mono, var(--font-mono-fallback))",color:e6?"var(--geist-foreground)":"var(--accents-1)"},value:eg||"./",width:"100%"})}),(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden",flexShrink:0},children:(0,t.jsx)(z.default,{flex:"0 0 auto",children:(0,t.jsx)(I.Button,{disabled:!!(!e6||tH||ey),onClick:()=>{F.analytics.track(V.AnalyticsEvent.PROJECT_CREATION_EDITED_ROOT_DIRECTORY,{version:3}),p(!0)},type:"secondary",children:"Edit"})})})]})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden"},children:(0,t.jsxs)(X,{className:eN.default.details,disableAnimation:!0,onClick:()=>th(e=>!e),open:tp,style:{backgroundColor:e6?"var(--geist-background)":"var(--accents-1)",color:e6?"var(--accents-6)":"var(--accents-3)"},title:"Build and Output Settings",children:[tC,(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[tx?(0,t.jsx)(A.Note,{type:"error",children:tx}):null,(0,t.jsx)(tV,{defaultValue:eJ?.settings.buildCommand,deploying:ey||tH,description:"The command your frontend framework provides for compiling your code.",disabled:!!e3?.buildCommand,field:"buildCommand",framework:e5,monorepoManager:ex,name:"Build Command",projectSettings:to,setProjectSettings:td,setShouldOverride:tu,shouldOverride:tc}),(0,t.jsx)(tV,{deploying:ey||tH,description:"The directory in which your compiled frontend will be located.",disabled:!!e3?.outputDirectory,field:"outputDirectory",framework:e5,monorepoManager:ex,name:"Output Directory",projectSettings:to,setProjectSettings:td,setShouldOverride:tu,shouldOverride:tc}),(0,t.jsx)(tV,{defaultValue:eJ?.settings.installCommand,deploying:ey||tH,description:(0,t.jsx)(t.Fragment,{children:"The command that is used to install your Project's software dependencies. If you don't need to install dependencies, override this field and leave it empty."}),disabled:!!e3?.installCommand,field:"installCommand",framework:e5,monorepoManager:ex,name:"Install Command",projectSettings:to,setProjectSettings:td,setShouldOverride:tu,shouldOverride:tc})]})]})}),(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden"},children:(0,t.jsx)(X,{className:eN.default.details,disableAnimation:!0,onClick:()=>tR({type:"TOGGLE_DETAILS"}),open:tO||tA.length>0,style:{backgroundColor:e6?"var(--geist-background)":"var(--accents-1)"},title:(0,t.jsxs)(t.Fragment,{children:["Environment Variables",tA.length>0?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(k.Badge,{size:"sm",variant:"gray-subtle",children:"Required"})]}):null]}),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[tP?(0,t.jsx)(A.Note,{type:"error",children:tP.message}):null,tA.length>0?(0,t.jsxs)(t.Fragment,{children:[tA.map((e,i)=>(0,t.jsx)(en,{explicitId:`${tF}${e}`,description:null,disabled:ey||tH,envName:e,envValue:tM[e]?.value??"",error:tM[e]?.error,hideLabels:0!==i,onRemove:()=>tU(t=>({...t,[e]:{value:""}})),setEnvValue:t=>tU(i=>({...i,[e]:{value:t,error:t?void 0:"Required"}}))},e)),tD?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[tD," ",tL?(0,t.jsx)(S.Link,{external:!0,href:tL,variant:"highlight",children:"Learn More"}):null]}):null]}):null,tI.map((e,i)=>(0,t.jsx)(en,{explicitId:`${tF}${e.key}`,description:null,disabled:ey||tH,envName:e.key,envValue:e.value,hideLabels:tA.length>0||i>0,onBulkAdd:e=>tR({type:"BULK_ADD",parsedEnvs:e}),onRemove:()=>{tR({type:"REMOVE",id:e.id})},setEnvName:t=>tR({type:"UPDATE_ENV_NAME",name:t,id:e.id}),setEnvValue:t=>tR({type:"UPDATE_ENV_VALUE",value:t,id:e.id})},e.id)),(0,t.jsx)(I.Button,{disabled:ey||tH,onClick:()=>tR({type:"ADD"}),prefix:(0,t.jsx)(W.Plus,{}),size:"small",style:{alignSelf:"flex-start"},type:"secondary",children:"Add More"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:ie,style:{display:"none"},type:"file",onChange:e=>{let t=e.target.files?.[0];if(!t||"text/plain"!==t.type&&""!==t.type)return void d.error("Please upload a valid env file");let i=new FileReader;i.onload=e=>{let t=e.target?.result;t&&tR({type:"BULK_ADD",parsedEnvs:Object.entries((0,ei.parseEnv)(t.toString()))})},i.readAsText(t)}}),(0,t.jsx)(I.Button,{disabled:!ie.current,onClick:()=>ie.current?.click(),prefix:(0,t.jsx)(U.FileText,{}),size:"small",type:"secondary",typeName:"button",children:"Import .env"})]}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["or paste the .env contents above."," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/environment-variables",type:"highlight",children:"Learn more"})]})]}),t4.length>0?(0,t.jsx)(eP,{}):null,t4.map(e=>{let{slug:i,totalEnvs:r}=e;return(0,t.jsx)(z.default,{children:(0,t.jsx)(tz,{slug:i,totalEnvs:r})},i)})]})})})]}),eB?(0,t.jsx)(ty,{gitType:ef?.type}):null]})]})]})})}),ez?null:(0,t.jsx)(Y,{footer:!0,style:{padding:0},children:(0,t.jsxs)(z.default,{className:"relative",children:[ex?.slug==="turbo"?(0,t.jsx)("div",{className:(0,r.clsx)(eB||ey||tH||t8?"hidden":j.default.turborepo,j.default.fadeIn)}):null,(0,t.jsx)(D.Skeleton,{show:!ek,style:{overflow:ek?void 0:"hidden"},children:(0,t.jsx)(I.Button,{disabled:t8,loading:tH||!!ey,onClick:()=>{t3()},width:"100%",children:tH||ey?"Deployingâ€¦":"Deploy"})})]})}),(0,t.jsx)(tf,{active:m,frameworks:l,onCancel:()=>{p(!1)},onContinue:e=>{p(!1),ej({type:"SET_ROOT_DIRECTORY",rootDirectory:e});let t=eh?.projects.find(t=>t.path===`/${e}`);async function i(){tl(await ta(eV?.id,t?.name))}t?(i(),td(t.settings),e7(t.framework)):eK((0,tm.default)(ef,void 0,e))}})]})};var tq=e.i(3495961),tY=e.i(6509836),tJ=e.i(2329301),tQ=e.i(1315623),tK=e.i(6979900),tX=e.i(2251791),tZ=e.i(316263),t0=e.i(7780974);function t1(e){let{frameworks:l,hasAccess:s}=e;(0,tq.useShouldRedirectToNew)();let o=(0,x.useRouter)(),{user:d}=(0,a.useUser)(),{team:c}=(0,n.useTeam)(),{configureProject:N,deploying:C,deploymentReset:E,deploymentId:S,dispatch:T,flowId:k}=(0,u.useProjectImportContext)();(0,tX.useImportTrackStatusChanges)(),(0,tZ.useTrackPageViewCustomActivityIgnoreQueryParams)(!!k,t0.VercelActivityAction.NewProjectImportViewed,{flowId:k});let{url:I}=(0,g.useRepoQuery)()||{},{data:P}=(0,v.useDetectEligibleProjects)(I),{monorepoManager:O}=P||{};(0,i.useEffect)(()=>()=>{T({type:"RESET"})},[T]);let[R,{height:A}]=(0,p.default)(),D=(0,h.useSpring)({height:A,config:{tension:300,friction:26,clamp:!0}}),L=(0,i.useCallback)(e=>{setTimeout(()=>{M.current?.scrollIntoView({behavior:"smooth"})},e||500)},[]),M=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(o.query.finishSetup&&(c||!o.query.teamSlug&&d)){let e={...o.query};delete e.finishSetup,o.push({query:e}),requestAnimationFrame(()=>L())}},[o,L,c,d]);let G=(0,i.useMemo)(()=>O?(0,t.jsx)(y.Tooltip,{text:`This project is using ${O.name}`,children:(0,t.jsx)(tY.FrameworkIcon,{className:(0,r.clsx)(tJ.default.monorepoManagerLogo,j.default.fadeIn),framework:O,size:24,style:{borderWidth:0}})}):void 0,[O]);return(0,_.useTrackStatsigEvent)({eventName:`new_import_${C?"deploying":"viewed"}`}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-0 @md-page:gap-12 flex-initial",children:[(0,t.jsx)(b.default,{active:N||!!C||!!o.query.teamSlug||!o.query.gitOrgLimit,as:f.animated.article,className:"configure-project-card bg-background-100",ref:(0,m.default)([R,M]),style:{willChange:"height",overflow:"hidden",...null!==C&&{...D}},title:"New Project",titleSuffix:G,children:(0,t.jsx)(tH,{frameworks:l,canCreateProject:s})}),C||E?(0,t.jsx)(w.default,{active:!!(C||E),deploymentId:S,flow:"import",resetDeploying:C?function(){T({type:"SET_DEPLOYING",deploying:!1}),T({type:"SET_DEPLOYMENT_RESET",deploymentReset:!0})}:void 0,flowId:k}):(0,t.jsx)(tQ.DeploymentPlaceholderCard,{}),(0,t.jsx)(tK.ImportFooter,{})]})}var t2=e.i(1459027),t4=e.i(8228513),t3=e.i(5746939);function t9(e){let{hasAccess:i,frameworks:l=[]}=e;return(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,r.clsx)(t4.default.importPageAdjustment,t3.default.newMain),children:(0,t.jsx)("div",{className:(0,r.clsx)("flex flex-col @lg-page:flex-row items-stretch justify-start gap-9 @lg-page:gap-[72px] flex-initial geist-wrapper",t3.default.newMainContentWrapper),children:(0,t.jsx)("div",{className:t3.default.mainContent,children:(0,t.jsx)(t1,{frameworks:l,hasAccess:!!i})})})})})}e.s(["ImportFlow",0,function(e){let{frameworks:r}=e,{isLoading:m,user:p}=(0,a.useUser)(),[f,h]=(0,u.useProjectImportReducer)(),{team:x,isReady:y}=(0,n.useTeam)(),{can:v,isLoading:j}=(0,o.default)(),_=(0,g.useRepoQuery)(),b=(0,s.useRouter)();(0,i.useEffect)(()=>{_||b.push("/new")},[_,b]);let w=v(d.Action.Create,d.Resource.Project),N=!y||j||m,C=(0,i.useMemo)(()=>({...f,dispatch:h}),[h,f]),E=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{!f.deploymentId||E.current||(E.current=!0,l.default.get("visitor-id")&&(0,c.postToStatsigClient)({events:[{eventName:"project_created"}]}))},[f.deploymentId,x?.billing?.plan,x?.id,p?.uid]),(0,t.jsxs)(u.ProjectImportContext.Provider,{value:C,children:[(0,t.jsx)(t2.TrackStatsigPageView,{name:"new_import"}),(0,t.jsx)(t9,{frameworks:r,hasAccess:!N&&!(N||!w)})]})},"StaticImportFlowPage",0,t9],5187772)}]);

//# debugId=8572c26e-7d39-9fad-d593-ae1f8cb76508
//# sourceMappingURL=e556ef35d88e8d79.js.map